webpackJsonp([1],{"0xuk":function(t,i){},"12tn":function(t,i){},"1NPp":function(t,i){},"2D1X":function(t,i){},"6AVW":function(t,i){},"6FqT":function(t,i){},Ahp8:function(t,i){},AjPk:function(t,i){},AldA:function(t,i){},Fibw:function(t,i){},FzsO:function(t,i){},Gfo9:function(t,i){},NHnr:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=o("7+uW"),n=o("fZjL"),a=o.n(n),s={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:t.name,on:{click:function(i){(t.isEnabled()?t.click:t.noop)()}}},[o("div",{class:["toolbar-button",t.selected?"selected-item":""]},[o("i",{ref:"icon-ref",class:t.icon,style:t.isEnabled()?"":"color: #bbb;"})])])},staticRenderFns:[]},l=o("VU/8")({data:function(){return{selected:!1}},methods:{isEnabled:function(){return!0},noop:function(){}}},s,!1,null,null,null).exports,r={extends:l,methods:{click:function(){var t=document.querySelector("div."+this.name+" div.toolbar-button"),i=20,o=setInterval(function(){i<0?clearInterval(o):t.style.backgroundColor="rgba(206, 233, 254, "+i--/20+")"},50);this.action()}}},c=o("VU/8")(r,null,!1,null,null,null).exports,h={data:function(){return{name:"menu-button",icon:"fas fa-bars"}},extends:c,methods:{action:function(){console.debug("Menu clicked");var t=document.querySelector("div.menu-button div.toolbar-button");this.$root.$emit("show-popup",{name:"main-menu",element:t})}}},u=o("VU/8")(h,null,!1,null,null,null).exports,d={data:function(){return{name:"undo-button",icon:"fas fa-undo"}},extends:c,methods:{action:function(){console.debug("Undo clicked"),this.$root.$emit("clear-selection"),this.$root.paint.state.dirty&&this.$root.paint.state.undo()},isEnabled:function(){return this.$root.paint.state.dirty}}},p=o("VU/8")(d,null,!1,null,null,null).exports,f={data:function(){return{name:"redo-button",icon:"fas fa-redo"}},extends:c,methods:{action:function(){console.debug("Redo clicked"),this.$root.$emit("clear-selection"),this.$root.paint.state.redo()},isEnabled:function(){return this.$root.paint.state.canRedo}}},v=o("VU/8")(f,null,!1,null,null,null).exports,m={data:function(){return{name:"copy-menu",icon:"far fa-clone"}},extends:l,methods:{click:function(){var t=document.querySelector("div.copy-menu div.toolbar-button");this.$root.$emit("show-popup",{name:"copy-menu",element:t})},isEnabled:function(){return!!this.$root.paint.state.copySelection||!!this.$root.paint.state.selection}}},g=o("VU/8")(m,null,!1,null,null,null).exports,$={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"toolbar-separator"})},staticRenderFns:[]},y=o("VU/8")({data:function(){return{}}},$,!1,null,null,null).exports,x={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"color-tool",on:{click:function(i){return t.click()}}},[o("div",{staticClass:"toolbar-button"},[o("div",{ref:"toolbar-button",staticClass:"color-icon",style:t._f("colorFilter")(t.$root.paint.options.color)})])])},staticRenderFns:[]},w=o("VU/8")({data:function(){return{selected:!1}},methods:{click:function(){var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"color-menu",element:t})}},filters:{colorFilter:function(t){return"background-color: "+t+";"}}},x,!1,null,null,null).exports,C=o("woOf"),b=o.n(C),_={methods:{compressUndoMap:function(t){var i={},o=void 0,e=void 0,n=void 0,s=void 0,l=null,r=null,c=void 0,h=void 0,u=void 0,d=a()(t);for(o in d){for(u=[],i[e=d[o]]=u,h=t[e],l=null,r=null,s=null,c=0;c<h.length;c++)(n=h[c])===s?null===l&&(l=r):null!==l?(u.push([l,r]),l=null):null!==r&&u.push(r),r=n,s=n+4;null!==l?u.push([l,n]):u.push(n)}return i}}},S=o("VU/8")(_,null,!1,null,null,null).exports,E={data:function(){return{icon:"",selected:!1}},extends:l,mixins:[S],mounted:function(){this.$root.$on("deselect",this.deselect),this.$root.paint.tool[this.name+"Select"]=this.click},methods:{click:function(){this.isEnabled()&&(this.$root.$emit("deselect",this.buttonGroup),this.selected=!0,this.$root.paint.state.setTouchFunctions(this.touchFunction,this.dragFunction,this.releaseFunction),this.select())},deselect:function(t){t===this.buttonGroup&&(this.selected=!1,console.debug(this.name+" has been deselected"),this.childDeselect&&this.childDeselect())},clearUndoCanvas:function(){var t=this.$root.paint.canvas.undoElement;this.$root.paint.canvas.undoContext.clearRect(0,0,t.width,t.height)},commitDrawing:function(){var t=this.$root.paint.canvas.drawElement,i=this.$root.paint.canvas.drawContext.getImageData(0,0,t.width,t.height),o=this.$root.paint.canvas.undoContext.getImageData(0,0,t.width,t.height),e={},n=i.data,a=o.data,s=n.length,l=void 0,r=void 0,c=void 0,h=void 0,u=void 0,d=void 0;for(l=0;l<s;l+=4)r=a[l],c=a[l+1],h=a[l+2],u=a[l+3],(r||c||h||u)&&(r=n[l],c=n[l+1],h=n[l+2],e[d=(u=n[l+3])|h<<8|c<<16|r<<24]||(e[d]=[]),e[d].push(l));var p=this.compressUndoMap(e);this.$root.paint.state.saveUndoMap(p),t=this.$root.paint.canvas.undoElement,this.$root.paint.canvas.drawContext.drawImage(t,0,0)}}},X=o("VU/8")(E,null,!1,null,null,null).exports,Y='\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" width="10" height="10">\n    <rect x="0" y="0" width="10" height="10" fill="#000000"></rect><rect x="5" y="0" width="5" height="5" fill="#ffffff"></rect>\n    <rect x="0" y="5" width="5" height="5" fill="#ffffff"></rect>\n</svg>\n    '.replace(/\n/g,"").replace(/\s{2,}/g,""),k=document.createElement("img");k.src="data:image/svg+xml;base64,"+btoa(Y),k.height=10,k.width=10;var F={x:100,y:100},T=50,P=50,R={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"select",icon:"fas fa-mouse-pointer",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0},selectionStart:{x:0,y:0},originalPosition:{x:0,y:0,width:0,height:0},dashPattern:null,selectionData:null,originalSelectionData:null,dirtySelection:!1,pasted:!1,pastePoint:b()({},F)}},extends:X,mounted:function(){this.$root.$on("clear-selection",this.clearSelection),this.$root.$on("drawing-started",this.clearSelection),this.$root.$on("update-selection",this.updateSelection),this.$root.$on("copy-selection",this.copySelection),this.$root.$on("cut-selection",this.cutSelection),this.$root.$on("paste-selection",this.pasteSelection),this.$root.paint.function.moveTouch=this.moveTouchFunction,this.$root.paint.function.moveDrag=this.moveDragFunction,this.$root.paint.function.moveRelease=this.moveReleaseFunction},methods:{select:function(){console.debug("Select Tool clicked")},childDeselect:function(){console.debug("Select tool deselect"),this.clearSelection();var t=this.$root.paint.canvas.undoContext;t.fillStyle=this.$root.paint.options.color,(t=this.$root.paint.canvas.activeContext).fillStyle=this.$root.paint.options.color;var i=this.$root.paint.canvas.activeElement;t.clearRect(0,0,i.width,i.height)},touchFunction:function(t){this.clearSelection(),this.pasted=!1,this.dirtySelection=!1;var i=this.$root.paint.canvas.toolElement,o=i.getBoundingClientRect(),e=Math.floor(o.left),n=Math.floor(o.top),a=void 0,s=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-e,this.mouse.initialY=t.clientY-n,a=this.mouse.initialX,s=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-e,this.touch.initialY=t.touches[0].clientY-n,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,a=this.touch.initialX,s=this.touch.initialY);var l=this.$root.paint.canvas.toolContext;null===this.dashPattern&&this.buildDashPattern(),l.strokeWidth=1,l.strokeStyle=this.dashPattern,l.clearRect(0,0,i.width,i.height),l.beginPath(),l.rect(a,s,1,1),l.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.toolElement,o=i.getBoundingClientRect(),e=Math.floor(o.left),n=Math.floor(o.top),a=void 0,s=void 0,l=void 0,r=void 0;"mousemove"===t.type?(a=this.mouse.initialX,s=this.mouse.initialY,l=t.clientX-e,r=t.clientY-n):"touchmove"===t.type&&(a=this.touch.initialX,s=this.touch.initialY,l=t.touches[0].clientX-e,r=t.touches[0].clientY-n,this.touch.finalX=l,this.touch.finalY=r);var c=this.$root.paint.canvas.toolContext;c.clearRect(0,0,i.width,i.height),c.beginPath();var h=l-a,u=r-s;c.beginPath(),c.rect(a,s,h,u),c.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.toolElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect(),l={left:Math.floor(s.left),top:Math.floor(s.top)};o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-l.left,a=t.clientY-l.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var r=this.$root.paint.canvas.toolContext;if(r.clearRect(0,0,i.width,i.height),n<o){var c=o;o=n,n=c}if(a<e){var h=e;e=a,a=h}var u=n-o,d=a-e;if(u&&d){this.$root.paint.state.selection={x:o,y:e,width:u,height:d},this.originalPosition.x=this.$root.paint.state.selection.x,this.originalPosition.y=this.$root.paint.state.selection.y,this.originalPosition.width=this.$root.paint.state.selection.width,this.originalPosition.height=this.$root.paint.state.selection.height;var p=this.$root.paint.canvas.drawContext;this.$root.paint.canvas.drawElement;this.originalSelectionData=p.getImageData(o,e,u,d),this.selectionData=p.getImageData(o,e,u,d),this.setSelectionTransparency(),this.invertSelectionBorder(!0),r.putImageData(this.selectionData,o,e)}},moveTouchFunction:function(t){var i=this.$root.paint.canvas.toolElement.getBoundingClientRect(),o=Math.floor(i.left),e=Math.floor(i.top);"mousedown"===t.type?(this.mouse.initialX=t.clientX-o,this.mouse.initialY=t.clientY-e):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o,this.touch.initialY=t.touches[0].clientY-e,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY),this.selectionStart.x=this.$root.paint.state.selection.x,this.selectionStart.y=this.$root.paint.state.selection.y;this.$root.paint.canvas.toolContext;this.invertSelectionBorder(!1)},moveDragFunction:function(t){var i=this.$root.paint.canvas.toolElement,o=i.getBoundingClientRect(),e=Math.floor(o.left),n=Math.floor(o.top),a=void 0,s=void 0,l=void 0,r=void 0;this.dirtySelection=!0,"mousemove"===t.type?(a=this.mouse.initialX,s=this.mouse.initialY,l=t.clientX-e,r=t.clientY-n):"touchmove"===t.type&&(a=this.touch.initialX,s=this.touch.initialY,l=t.touches[0].clientX-e,r=t.touches[0].clientY-n,this.touch.finalX=l,this.touch.finalY=r);var c=l-a,h=r-s;this.$root.paint.state.selection.x=this.selectionStart.x+c,this.$root.paint.state.selection.y=this.selectionStart.y+h;var u=this.$root.paint.canvas.toolContext;if(u.clearRect(0,0,i.width,i.height),!this.pasted){var d=this.$root.paint.canvas.activeContext;d.fillStyle="#ffffff",d.fillRect(this.originalPosition.x,this.originalPosition.y,this.originalPosition.width,this.originalPosition.height)}u.putImageData(this.selectionData,this.$root.paint.state.selection.x,this.$root.paint.state.selection.y)},moveReleaseFunction:function(t){var i=this.$root.paint.canvas.toolElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect(),l={left:Math.floor(s.left),top:Math.floor(s.top)};o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-l.left,a=t.clientY-l.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var r=n-o,c=a-e;this.$root.paint.state.selection.x=this.selectionStart.x+r,this.$root.paint.state.selection.y=this.selectionStart.y+c;var h=this.$root.paint.canvas.toolContext;if(h.clearRect(0,0,i.width,i.height),!this.pasted){var u=this.$root.paint.canvas.activeContext;u.fillStyle="#ffffff",u.fillRect(this.originalPosition.x,this.originalPosition.y,this.originalPosition.width,this.originalPosition.height)}this.invertSelectionBorder(!0),h.putImageData(this.selectionData,this.$root.paint.state.selection.x,this.$root.paint.state.selection.y)},updateSelection:function(t){if(this.dirtySelection=!0,t&&(this.originalSelectionData=t(this.originalSelectionData),this.selectionData=new ImageData(Uint8ClampedArray.from(this.originalSelectionData.data),this.originalSelectionData.width,this.originalSelectionData.height),this.invertSelectionBorder(!0)),this.$root.paint.state.selection){var i=this.$root.paint.canvas.toolElement,o=this.$root.paint.canvas.toolContext;if(o.clearRect(0,0,i.width,i.height),!this.pasted){var e=this.$root.paint.canvas.activeContext;e.fillStyle="#ffffff",e.fillRect(this.originalPosition.x,this.originalPosition.y,this.originalPosition.width,this.originalPosition.height)}this.setSelectionTransparency(),o.putImageData(this.selectionData,this.$root.paint.state.selection.x,this.$root.paint.state.selection.y)}},clearSelection:function(t){if(this.$root.paint.state.selection){if(this.invertSelectionBorder(!1),this.dirtySelection){var i=this.$root.paint.canvas.undoElement,o=this.$root.paint.canvas.undoContext;o.clearRect(0,0,i.width,i.height),this.pasted||(o.fillStyle="#ffffff",o.fillRect(this.originalPosition.x,this.originalPosition.y,this.originalPosition.width,this.originalPosition.height)),this.setSelectionTransparency(),this.compensateTransparentOverlap(),o.putImageData(this.selectionData,this.$root.paint.state.selection.x,this.$root.paint.state.selection.y),this.commitDrawing()}this.$root.paint.state.selection=null;var e=this.$root.paint.canvas.toolElement,n=this.$root.paint.canvas.toolContext;n.clearRect(0,0,e.width,e.height),n=this.$root.paint.canvas.activeContext,e=this.$root.paint.canvas.activeElement,n.clearRect(0,0,e.width,e.height)}this.$root.$emit("selection-cleared",t)},copySelection:function(){this.$root.paint.state.selection&&(this.$root.paint.state.copySelection=this.originalSelectionData)},cutSelection:function(){this.copySelection();var t=this.$root.paint.canvas.undoElement,i=this.$root.paint.canvas.undoContext;if(i.clearRect(0,0,t.width,t.height),!this.pasted){var o=this.originalPosition.x,e=this.originalPosition.y,n=this.originalPosition.width,a=this.originalPosition.height;i.fillStyle="#ffffff",i.fillRect(o,e,n,a)}this.$root.paint.state.selection=null,t=this.$root.paint.canvas.toolElement,(i=this.$root.paint.canvas.toolContext).clearRect(0,0,t.width,t.height),this.commitDrawing()},pasteSelection:function(){if(this.$root.paint.state.copySelection){this.clearSelection(),this.pasted=!0;var t=this.$root.paint.state.copySelection,i=this.pastePoint.x,o=this.pastePoint.y,e=t.width,n=t.height,a=i+e,s=o+e,l=this.$root.paint.canvas.toolElement.parentElement.getBoundingClientRect(),r={width:Math.floor(l.width),height:Math.floor(l.height)},c=this.$root.paint.canvas.toolContext;a>=r.width&&(i-=a-e)<0&&(i=0),s>=r.height&&(o-=s-e)<0&&(o=0),this.pastePoint.x+=T,this.pastePoint.y+=P,this.pastePoint.x+e>r.width&&(this.pastePoint.x=F.x),this.pastePoint.y+n>r.height&&(this.pastePoint.y=F.y),this.originalSelectionData=t,this.selectionData=new ImageData(Uint8ClampedArray.from(t.data),e,n),this.$root.paint.state.selection={x:i,y:o,width:e,height:n},this.originalPosition={x:i,y:o,width:e,height:n},this.dirtySelection=!0,this.setSelectionTransparency(),this.invertSelectionBorder(!0),c.putImageData(this.selectionData,i,o)}},invertSelectionBorder:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=function(t,o){return 4*(o*i+t)},n=this.selectionData.data,a=this.originalSelectionData.data,s=[{deltaX:1,deltaY:0,bound:function(t,o){return t<i-1}},{deltaX:0,deltaY:1,bound:function(t,i){return i<o-1}},{deltaX:-1,deltaY:0,bound:function(t,i){return t>0}},{deltaX:0,deltaY:-1,bound:function(t,i){return i>0}}],l=0,r=0,c=!0,h=void 0;s.forEach(function(i){do{h=e(l,r),c&&(t?(n[h]=255-a[h],n[h+1]=255-a[h+1],n[h+2]=255-a[h+2],n[h+3]=255):(n[h]=a[h],n[h+1]=a[h+1],n[h+2]=a[h+2],n[h+3]=a[h+3])),c=!c,l+=i.deltaX,r+=i.deltaY}while(i.bound(l,r))})},setSelectionTransparency:function(){if(this.$root.paint.options.transparentSelection){var t=this.selectionData.data,i=void 0;for(i=0;i<t.length;i+=4)this.isBackgroundColor(t,i)&&(t[i+3]=0)}else{var o=this.selectionData.data,e=void 0;for(e=0;e<o.length;e+=4)this.isBackgroundColor(o,e)&&(o[e+3]=255)}},compensateTransparentOverlap:function(){if(this.$root.paint.options.transparentSelection&&this.isSelectionOverlapsOriginal()){var t=void 0,i=void 0,o=void 0,e=void 0,n=this.$root.paint.state.selection.x,a=this.$root.paint.state.selection.y,s=this.$root.paint.state.selection.width,l=this.$root.paint.state.selection.height,r=this.selectionData.data;for(i=0;i<l;i++)for(t=0;t<s;t++)e=a+i,(o=n+t)>=this.originalPosition.x&&e>=this.originalPosition.y&&o<this.originalPosition.x+this.originalPosition.width&&e<this.originalPosition.y+this.originalPosition.height&&(r[4*(i*s+t)+3]=255)}},isSelectionOverlapsOriginal:function(){var t=this.$root.paint.state.selection.x,i=this.$root.paint.state.selection.y,o=t+this.$root.paint.state.selection.width-1,e=i+this.$root.paint.state.selection.height-1,n=this.originalPosition.x,a=this.originalPosition.y,s=n+this.originalPosition.width-1,l=a+this.originalPosition.height-1;return t<s&&n<o&&i<l&&a<e},isBackgroundColor:function(t,i){return t[i]+t[i+1]+t[i+2]>=750},buildDashPattern:function(){var t=this.$root.paint.canvas.toolContext;this.dashPattern=t.createPattern(k,"repeat")}}},D=o("VU/8")(R,null,!1,null,null,null).exports,M={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"brush",icon:"fas fa-paint-brush",mouse:{lastX:0,lastY:0,moved:!1},touch:{}}},extends:X,methods:{select:function(){console.debug("Brush Tool clicked")},touchFunction:function(t){var i=this;console.debug(t);var o=this.$root.paint.canvas.activeElement.getBoundingClientRect();if("mousedown"===t.type){var e=this.$root.paint.canvas.activeContext,n=t.clientX-o.left,a=t.clientY-o.top;e.beginPath(),e.moveTo(n,a),e.lineTo(n,a),e.stroke(),this.mouse.lastX=n,this.mouse.lastY=a,this.mouse.moved=!1}else if("touchstart"===t.type){this.touch={};var s=this.$root.paint.canvas.activeContext;Array.prototype.forEach.call(t.touches,function(t){var e={x:t.clientX-o.left,y:t.clientY-o.top,moved:!1};s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(e.x,e.y),s.stroke(),i.touch[t.identifier]=e})}},dragFunction:function(t){var i=this;console.debug(t);var o=this.$root.paint.canvas.activeElement.getBoundingClientRect();if("mousemove"===t.type){var e=t.clientX-o.left,n=t.clientY-o.top,a=this.$root.paint.canvas.activeContext;a.moveTo(this.mouse.lastX,this.mouse.lastY),a.lineTo(e,n),a.stroke(),this.mouse.lastX=e,this.mouse.lastY=n,this.mouse.moved=!0}else if("touchmove"===t.type){var s=this.$root.paint.canvas.activeContext;Array.prototype.forEach.call(t.touches,function(t){var e={x:t.clientX-o.left,y:t.clientY-o.top,moved:!0};s.beginPath(),s.moveTo(i.touch[t.identifier].x,i.touch[t.identifier].y),s.lineTo(e.x,e.y),s.stroke(),i.touch[t.identifier]=e})}},releaseFunction:function(t){var i=this;if(console.debug(t),"mouseup"===t.type){var o=this.$root.paint.canvas.activeContext;this.mouse.moved||(o.beginPath(),o.ellipse(this.mouse.lastX,this.mouse.lastY,this.$root.paint.options.lineWidth/2,this.$root.paint.options.lineWidth/2,0,0,2*Math.PI),o.fill())}else if("touchend"===t.type){var e=this.$root.paint.canvas.activeContext;Array.prototype.forEach.call(t.changedTouches,function(t){var o=i.touch[t.identifier];o&&!o.moved&&(e.beginPath(),e.ellipse(o.x,o.y,i.$root.paint.options.lineWidth/2,i.$root.paint.options.lineWidth/2,0,0,2*Math.PI),e.fill())})}var n=this.$root.paint.canvas.activeElement,a=this.$root.paint.canvas.activeContext,s=this.$root.paint.canvas.undoContext;s.clearRect(0,0,n.width,n.height),s.drawImage(n,0,0),a.clearRect(0,0,n.width,n.height),this.commitDrawing()}}},U=o("VU/8")(M,null,!1,null,null,null).exports,V={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"line",icon:"fas fa-slash",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0}}},extends:X,methods:{select:function(){console.debug("Line Tool clicked")},touchFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.activeContext;a.clearRect(0,0,i.width,i.height),a.beginPath(),a.moveTo(e,n),a.lineTo(e,n),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l.beginPath(),l.moveTo(e,n),l.lineTo(a,s),l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l=this.$root.paint.canvas.undoContext,i=this.$root.paint.canvas.undoElement,l.clearRect(0,0,i.width,i.height),l.beginPath(),l.moveTo(o,e),l.lineTo(n,a),l.stroke(),this.commitDrawing()}}};var A=o("VU/8")(V,null,!1,function(t){o("0xuk")},null,null).exports,B={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"rectangle",icon:"far fa-square",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0}}},extends:X,methods:{select:function(){console.debug("Rectangle Tool clicked")},touchFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.activeContext;a.clearRect(0,0,i.width,i.height),a.beginPath(),a.rect(e,n,1,1),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l.beginPath();var r=a-e,c=s-n;l.beginPath(),l.rect(e,n,r,c),this.$root.paint.options.filledPolygon?l.fill():l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l=this.$root.paint.canvas.undoContext,i=this.$root.paint.canvas.undoElement,l.clearRect(0,0,i.width,i.height);var r=n-o,c=a-e;l.beginPath(),l.rect(o,e,r,c),this.$root.paint.options.filledPolygon?l.fill():l.stroke(),this.commitDrawing()}}},I=o("VU/8")(B,null,!1,null,null,null).exports,W={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"ellipse",icon:"far fa-circle",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0}}},extends:X,methods:{select:function(){console.debug("Ellipse Tool clicked")},touchFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.activeContext;a.clearRect(0,0,i.width,i.height),a.beginPath(),a.ellipse(e,n,1,1,0,0,2*Math.PI),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l.beginPath();var r=(a-e)/2,c=(s-n)/2,h=e+r,u=n+c;r<0&&(h=a+(r=-r)),c<0&&(u=s+(c=-c)),l.ellipse(h,u,r,c,0,0,2*Math.PI),this.$root.paint.options.filledPolygon?l.fill():l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),i=this.$root.paint.canvas.undoElement,(l=this.$root.paint.canvas.undoContext).clearRect(0,0,i.width,i.height),l.beginPath();var r=(n-o)/2,c=(a-e)/2,h=o+r,u=e+c;r<0&&(h=n+(r=-r)),c<0&&(u=a+(c=-c)),l.ellipse(h,u,r,c,0,0,2*Math.PI),this.$root.paint.options.filledPolygon?l.fill():l.stroke(),this.commitDrawing()}}},L=o("VU/8")(W,null,!1,null,null,null).exports,z={triangle:[{x:.5,y:0},{x:1,y:1},{x:0,y:1}],rightTriangle:[{x:0,y:0},{x:1,y:1},{x:0,y:1}],diamond:[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1},{x:0,y:.5}],pentagon:[{x:.5,y:0},{x:1,y:.38},{x:.81,y:1},{x:.19,y:1},{x:0,y:.38}],hexagon:[{x:.5,y:0},{x:1,y:.25},{x:1,y:.75},{x:.5,y:1},{x:0,y:.75},{x:0,y:.25}],rightArrow:[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1},{x:.5,y:.75},{x:0,y:.75},{x:0,y:.25},{x:.5,y:.25}],leftArrow:[{x:.5,y:0},{x:0,y:.5},{x:.5,y:1},{x:.5,y:.75},{x:1,y:.75},{x:1,y:.25},{x:.5,y:.25}],upArrow:[{x:.5,y:0},{x:1,y:.5},{x:.75,y:.5},{x:.75,y:1},{x:.25,y:1},{x:.25,y:.5},{x:0,y:.5}],downArrow:[{x:.5,y:1},{x:0,y:.5},{x:.25,y:.5},{x:.25,y:0},{x:.75,y:0},{x:.75,y:.5},{x:1,y:.5}],fourPointedStar:[{x:.5,y:0},{x:.62,y:.38},{x:1,y:.5},{x:.62,y:.62},{x:.5,y:1},{x:.38,y:.62},{x:0,y:.5},{x:.38,y:.38}],fivePointedStar:[{x:.5,y:0},{x:.62,y:.38},{x:1,y:.39},{x:.7,y:.62},{x:.81,y:1},{x:.5,y:.78},{x:.19,y:1},{x:.3,y:.62},{x:0,y:.39},{x:.38,y:.38}],sixPointedStar:[{x:.5,y:0},{x:.68,y:.25},{x:1,y:.25},{x:.84,y:.5},{x:1,y:.75},{x:.68,y:.75},{x:.5,y:1},{x:.32,y:.75},{x:0,y:.75},{x:.16,y:.5},{x:0,y:.25},{x:.32,y:.25}],lightning:[{x:.39,y:0},{x:.59,y:.28},{x:.52,y:.32},{x:.76,y:.55},{x:.68,y:.59},{x:1,y:1},{x:.47,y:.69},{x:.56,y:.64},{x:.24,y:.45},{x:.35,y:.39},{x:0,y:.19}]},O={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"shape",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0}}},extends:X,methods:{select:function(){console.debug("Shape Tool clicked");var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"shape-menu",element:t})},touchFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.activeContext;a.clearRect(0,0,i.width,i.height),a.beginPath(),a.rect(e,n,1,1),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l.beginPath();var r=a-e,c=s-n;l.beginPath(),this.drawShape(e,n,r,c,l),this.$root.paint.options.filledPolygon?l.fill():l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l=this.$root.paint.canvas.undoContext,i=this.$root.paint.canvas.undoElement,l.clearRect(0,0,i.width,i.height);var r=n-o,c=a-e;l.beginPath(),this.drawShape(o,e,r,c,l),this.$root.paint.options.filledPolygon?l.fill():l.stroke(),this.commitDrawing()},drawShape:function(t,i,o,e,n){var a=this.$root.paint.options.selectedShape,s=z[a];if(s){var l=s.map(function(n){return{x:t+n.x*o,y:i+n.y*e}});n.beginPath(),n.moveTo(l[0].x,l[0].y);var r=void 0;for(r=1;r<l.length;r++)n.lineTo(l[r].x,l[r].y);n.closePath()}else console.warn('Invalid shape "'+a+'" selected')}},filters:{pointFilter:function(t){return(z[t]||[]).reduce(function(t,i){return t+(100*i.x+",")+100*i.y+" "},"")}}},G={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:t.name},[o("div",{class:["toolbar-button",t.selected?"selected-item":""],on:{click:function(i){return t.click()}}},[o("div",{ref:"toolbar-button",staticClass:"shape-icon svg-container"},[o("svg",{attrs:{width:"100%",viewBox:"0 0 100 100"}},[o("polygon",{attrs:{stroke:"#000000","stroke-width":"6",fill:"none",points:t._f("pointFilter")(t.$root.paint.options.selectedShape)}})])])])])},staticRenderFns:[]};var q=o("VU/8")(O,G,!1,function(t){o("6AVW")},null,null).exports;var N=function(t,i,o,e,n,a,s,l,r,c,h){var u=[[o,e]],d=n,p=a,f=t.getImageData(0,0,d,p),v=4*(e*d+o),m=f.data[v+0],g=f.data[v+1],$=f.data[v+2],y=f.data[v+3],x=0;if(s!==m||l!==g||r!==$||c!==y){for(;u.length;){var w,C,b=void 0,_=void 0,S=void 0;for(C=(w=u.pop())[0],v=4*((b=w[1])*d+C);E(v);)v=4*(--b*d+C);for(_=!1,S=!1;v=4*(++b*d+C),b<p&&E(v);)X(v),C>0&&(E(v-4)?_||(u.push([C-1,b]),_=!0):_&&(_=!1)),C<d-1&&(E(v+4)?S||(u.push([C+1,b]),S=!0):S&&(S=!1)),v+=4*d}i.putImageData(f,0,0)}function E(t){return f.data[t+0]===m&&f.data[t+1]===g&&f.data[t+2]===$&&f.data[t+3]===y}function X(t){f.data[t+0]=s,f.data[t+1]=l,f.data[t+2]=r,f.data[t+3]=c,h[x++]=t}},H=/^#?([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})?$/i,Q={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"fill",icon:"fas fa-fill-drip",fillUndoArray:[]}},mounted:function(){},extends:X,methods:{select:function(){console.debug("Fill Tool clicked")},touchFunction:function(t){},dragFunction:function(t){},releaseFunction:function(t){var i=this,o=this.$root.paint.canvas.drawElement,e=o.getBoundingClientRect(),n=void 0,s=void 0;"mouseup"===t.type?(n=t.clientX-e.left,s=t.clientY-e.top):"touchend"===t.type&&(n=t.changedTouches[0].clientX-e.left,s=t.changedTouches[0].clientY-e.top);var l=this.$root.paint.canvas.drawContext,r=o.parentElement.getBoundingClientRect(),c=Math.floor(r.width),h=Math.floor(r.height),u=this.$root.paint.canvas.undoElement,d=this.$root.paint.canvas.undoContext;d.drawImage(o,0,0);var p=d.getImageData(0,0,c,h),f=this.parseColor(this.$root.paint.options.color),v=[];N(l,l,n,s,c,h,f[0],f[1],f[2],f[3]||255,v),v.length>0&&setTimeout(function(){var t=u.width,o={},e=p.data,n=void 0,s=void 0,l=void 0,r=void 0,h=void 0,d=void 0,f=void 0,m=void 0,g=void 0;for(n=0;n<v.length;n++)h=e[s=v[n]],d=e[s+1],f=e[s+2],m=e[s+3],o[g=m|f<<8|d<<16|h<<24]||(o[g]=[]),r=(s/=4)%c,l=4*(Math.floor(s/c)*t+r),o[g].push(l);a()(o).forEach(function(t){o[t].sort()});var $=i.compressUndoMap(o);i.$root.paint.state.saveUndoMap($)},0)},parseColor:function(t){var i=H.exec(t||"");if(!i)throw new Error("Invalid color set");return i.slice(1).map(function(t){var i=parseInt(t,16);return isNaN(i)||i<0||i>255?255:i})}}},j=o("VU/8")(Q,null,!1,null,null,null).exports,K={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"eraser",icon:"fas fa-eraser",mouse:{lastX:0,lastY:0},touch:{},contextRestoreTimeoutArray:[]}},extends:X,methods:{select:function(){console.debug("Eraser Tool clicked")},touchFunction:function(t){var i=this;this.contextRestoreTimeoutArray.forEach(function(t){return clearTimeout(t)}),this.contextRestoreTimeoutArray.length=0;var o=this.$root.paint.canvas.activeElement.getBoundingClientRect(),e=this.$root.paint.canvas.activeContext,n=this.$root.paint.options,a=this.getEraserLineWidth(n);if(e.lineWidth=a,e.strokeStyle="#ffffff","mousedown"===t.type){var s=t.clientX-o.left,l=t.clientY-o.top;e.beginPath(),e.moveTo(s,l),e.lineTo(s,l),e.stroke(),this.mouse.lastX=s,this.mouse.lastY=l,this.drawTool(s,l,a)}else"touchstart"===t.type&&(this.touch={},Array.prototype.forEach.call(t.touches,function(t,n){var s={x:t.clientX-o.left,y:t.clientY-o.top};e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(s.x,s.y),e.stroke(),i.touch[t.identifier]=s,i.drawTool(s.x,s.y,a,0===n)}))},dragFunction:function(t){var i=this,o=this.$root.paint.canvas.activeElement.getBoundingClientRect(),e=this.$root.paint.canvas.activeContext,n=this.$root.paint.options,a=this.getEraserLineWidth(n);if("mousemove"===t.type){var s=t.clientX-o.left,l=t.clientY-o.top;e.moveTo(this.mouse.lastX,this.mouse.lastY),e.lineTo(s,l),e.stroke(),this.mouse.lastX=s,this.mouse.lastY=l,this.drawTool(s,l,a)}else"touchmove"===t.type&&Array.prototype.forEach.call(t.touches,function(t,n){var s={x:t.clientX-o.left,y:t.clientY-o.top};e.beginPath(),e.moveTo(i.touch[t.identifier].x,i.touch[t.identifier].y),e.lineTo(s.x,s.y),e.stroke(),i.touch[t.identifier]=s,i.drawTool(s.x,s.y,a,0===n)})},releaseFunction:function(t){var i=this,o=this.$root.paint.canvas.activeElement,e=this.$root.paint.canvas.activeContext,n=this.$root.paint.canvas.undoContext,a=this.$root.paint.canvas.toolContext;n.clearRect(0,0,o.width,o.height),n.drawImage(o,0,0),e.clearRect(0,0,o.width,o.height),a.clearRect(0,0,o.width,o.height),this.commitDrawing(),this.contextRestoreTimeoutArray.push(setTimeout(function(){(e=i.$root.paint.canvas.activeContext).strokeStyle=i.$root.paint.options.color,e.lineWidth=i.$root.paint.options.lineWidth},500))},drawTool:function(t,i,o){var e=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=this.$root.paint.canvas.toolElement,a=this.$root.paint.canvas.toolContext;this.$root.paint.options;e&&a.clearRect(0,0,n.width,n.height),o/=2,a.fillStyle="#ffffff",a.beginPath(),a.ellipse(t,i,o,o,0,0,2*Math.PI),a.fill(),a.lineWidth=1,a.strokeStyle="#000000",a.beginPath(),a.ellipse(t,i,o,o,0,0,2*Math.PI),a.stroke()},getEraserLineWidth:function(t){return 3*t.lineWidth}}},J={mounted:function(){var t=document.querySelector("div.line-width-icon.svg-container");t.innerHTML=t.innerHTML},methods:{click:function(){var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"line-width-menu",element:t})}}},Z={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"line-width-tool",on:{click:function(i){return t.click()}}},[o("div",{staticClass:"toolbar-button"},[o("div",{ref:"toolbar-button",staticClass:"line-width-icon svg-container"},[o("svg",{staticClass:"svg-content",attrs:{viewbox:"0 0 32 32",preserveAspectRatio:"xMinYMin meet"}},[o("g",[o("line",{staticStyle:{stroke:"rgb(0, 0, 0)","stroke-width":"1"},attrs:{x1:"0",y1:"2",x2:"31",y2:"2"}}),t._v(" "),o("line",{staticStyle:{stroke:"rgb(0, 0, 0)","stroke-width":"3"},attrs:{x1:"0",y1:"7",x2:"31",y2:"7"}}),t._v(" "),o("line",{staticStyle:{stroke:"rgb(0, 0, 0)","stroke-width":"5"},attrs:{x1:"0",y1:"15",x2:"31",y2:"15"}}),t._v(" "),o("line",{staticStyle:{stroke:"rgb(0, 0, 0)","stroke-width":"7"},attrs:{x1:"0",y1:"25",x2:"31",y2:"25"}})])])])])])},staticRenderFns:[]};var tt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"filled-polygon-tool"},[o("div",{ref:"toolbar-button",staticClass:"toolbar-button option-tool",on:{click:function(i){return t.click()}}},[o("div",{staticClass:"filled-polygon-icon option-icon"},[o("div",{class:["option",t.isFill()?"":"selected-option"]},[o("div",{staticClass:"no-fill-option"})]),t._v(" "),o("div",{class:["option",t.isFill()?"selected-option":""]},[o("div",{staticClass:"fill-option"})])])])])},staticRenderFns:[]};var it={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"transparent-selection-tool"},[o("div",{ref:"toolbar-button",staticClass:"toolbar-button option-tool",on:{click:function(i){return t.click()}}},[o("div",{staticClass:"transparent-selection-icon option-icon"},[o("div",{class:["option",t.isTransparentSelection()?"":"selected-option"]},[o("div",{staticClass:"no-fill-option"})]),t._v(" "),o("div",{class:["option",t.isTransparentSelection()?"selected-option":""]},[o("div",{staticClass:"fill-option"})])])])])},staticRenderFns:[]};var ot={data:function(){return{}},components:{MenuButton:u,UndoButton:p,RedoButton:v,CopyMenuTool:g,ToolbarSeparator:y,ColorTool:w,SelectTool:D,BrushTool:U,LineTool:A,RectangleTool:I,EllipseTool:L,ShapeTool:q,FillTool:j,EraserTool:o("VU/8")(K,null,!1,null,null,null).exports,LineWidthTool:o("VU/8")(J,Z,!1,function(t){o("dJzP")},null,null).exports,FilledPolygonTool:o("VU/8")({methods:{isFill:function(){return this.$root.paint.options.filledPolygon},click:function(){var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"filled-polygon-menu",element:t})}}},tt,!1,function(t){o("US8W")},null,null).exports,TransparentSelectionTool:o("VU/8")({methods:{isTransparentSelection:function(){return this.$root.paint.options.transparentSelection},click:function(){var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"transparent-selection-menu",element:t})}}},it,!1,function(t){o("Fibw")},null,null).exports}},et={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"toolbar"},[o("menu-button"),t._v(" "),o("undo-button"),t._v(" "),o("redo-button"),t._v(" "),o("copy-menu-tool"),t._v(" "),o("toolbar-separator"),t._v(" "),o("color-tool"),t._v(" "),o("select-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("brush-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("line-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("rectangle-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("ellipse-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("shape-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("fill-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("eraser-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("toolbar-separator"),t._v(" "),o("line-width-tool"),t._v(" "),o("filled-polygon-tool"),t._v(" "),o("transparent-selection-tool")],1)},staticRenderFns:[]};var nt=o("VU/8")(ot,et,!1,function(t){o("gHmE")},null,null).exports,at={data:function(){return{mouseDown:!1,moveMouseDown:!1,selectionMoving:!1}},mounted:function(){this.createCanvasSet()},methods:{createCanvasSet:function(){var t=this,i=(this.getCanvasDiv(),Math.max(window.screen.width,window.screen.height));["undo","draw","active","tool"].forEach(function(o){var e=document.querySelector("canvas."+o+"-canvas");e.width=i,e.height=i,t.$root.paint.canvas[o+"Element"]=e,t.$root.paint.canvas[o+"Context"]=e.getContext("2d"),t.$root.paint.canvas[o+"Context"].lineCap="round"})},resizeCanvasHandler:function(){var t=this.getCanvasDiv().getBoundingClientRect(),i=this.$root.paint.canvas.drawElement;if(t.width>i.width||t.height>i.height){console.debug("resized");var o=this.$root.paint.canvas.drawContext,e=o.getImageData(0,0,i.width,i.height);["undo","draw","active","tool"].forEach(function(i){var o=document.querySelector("canvas."+i+"-canvas");o.width=t.width,o.height=t.height,o.getContext("2d").lineCap="round"}),o.fillStyle="#ffffff",o.beginPath(),o.rect(0,0,t.width,t.height),o.fill(),this.$root.paint.state.setColor(this.$root.paint.options.color),this.$root.paint.state.setLineWidth(this.$root.paint.options.lineWidth),o.putImageData(e,0,0)}},getCanvasDiv:function(){return this.$refs["canvas-div"]},touchFunction:function(t){this.selectionMoving||(this.$root.$emit("drawing-started"),this.$root.paint.state.drawing=!0,"mousedown"===t.type&&(this.mouseDown=!0),this.$root.paint.function.touch(t))},dragFunction:function(t){this.selectionMoving||("mousemove"!==t.type||this.mouseDown)&&(t.preventDefault(),this.$root.paint.function.drag(t))},releaseFunction:function(t){this.selectionMoving?this.moveReleaseFunction(t):("mouseup"===t.type&&(this.mouseDown=!1),this.$root.paint.function.release(t),this.$root.paint.state.drawing=!1,this.$root.$emit("drawing-released"))},moveTouchFunction:function(t){"mousedown"===t.type&&(this.mouseDown=!0),this.selectionMoving=!0,this.$root.paint.function.moveTouch(t)},moveDragFunction:function(t){("mousemove"!==t.type||this.mouseDown)&&(t.preventDefault(),this.$root.paint.function.moveDrag(t))},moveReleaseFunction:function(t){"mouseup"===t.type&&(this.mouseDown=!1),this.selectionMoving=!1,this.$root.paint.function.moveRelease(t)}},filters:{selectionFilter:function(t){return t?"left: "+t.x+"px; top: "+t.y+"px; width: "+t.width+"px; height: "+t.height+"px;":""}}},st={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"canvas"},[o("div",{ref:"canvas-div",staticClass:"canvas-child"},[o("canvas",{staticClass:"undo-canvas"}),t._v(" "),o("canvas",{staticClass:"draw-canvas"}),t._v(" "),o("canvas",{staticClass:"active-canvas"}),t._v(" "),o("canvas",{staticClass:"tool-canvas",on:{mousedown:t.touchFunction,touchstart:t.touchFunction,mousemove:t.dragFunction,touchmove:t.dragFunction,mouseup:t.releaseFunction,touchend:t.releaseFunction}})]),t._v(" "),o("div",{staticClass:"paint-cover-light"}),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"selection",style:t._f("selectionFilter")(t.$root.paint.state.selection),on:{mousedown:t.moveTouchFunction,touchstart:t.moveTouchFunction,mousemove:t.moveDragFunction,touchmove:t.moveDragFunction,mouseup:t.moveReleaseFunction,touchend:t.moveReleaseFunction}})])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"paint-cover-heavy"},[i("div",{staticClass:"outer"},[i("div",{staticClass:"inner-cover"}),this._v(" "),i("div",{staticClass:"inner-container"},[i("i",{staticClass:"fas fa-hourglass-half"})])])])}]};var lt=o("VU/8")(at,st,!1,function(t){o("AjPk")},null,null).exports,rt={data:function(){return{visible:!1,popupVisible:!1,heightOffset:0,width:0,initiallyHidden:!0,attachElement:null}},props:{name:{type:String,default:""}},mounted:function(){var t=this;this.$root.$on("show-popup",function(i){t.name===i.name&&t.show(i.element)}),this.$root.$on("hide-popup",function(i){t.name===i&&t.hide()}),this.setLeft(),window.addEventListener("resize",function(){t.setLeft(),t.setTop()}),this.$root.$on("unhide-popups",function(){return t.initiallyHidden=!1})},methods:{show:function(t){var i=this;this.attachElement=t,this.setTop(),this.visible=!0,document.querySelector("div.popup-container."+this.name+" div.popup-menu").style.left="",setTimeout(function(){return i.popupVisible=!0},250)},hide:function(){this.visible=!1,this.popupVisible=!1,document.querySelector("div.popup-container."+this.name+" div.popup-menu").style.left=-this.width+"px"},setLeft:function(){var t=this.$refs["popup-ref"].getBoundingClientRect();this.width=t.width},setTop:function(){if(this.attachElement){var t=this.attachElement.getBoundingClientRect();this.heightOffset=t.top}}}},ct={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:["popup-container",t.name]},[o("div",{class:["popup-overlay",t.visible?"popup-visible":"popup-invisible"],on:{click:function(i){return t.hide()}}}),t._v(" "),o("div",{ref:"popup-ref",class:["popup-menu",t.popupVisible?"popup-layer":""],style:"top: "+t.heightOffset+"px;"+(t.visible?"":" left: "+-t.width+"px;")+(t.initiallyHidden?" z-index: -5;":"")},[t._t("default")],2)])},staticRenderFns:[]};var ht=o("VU/8")(rt,ct,!1,function(t){o("sufU")},"data-v-71862392",null).exports,ut={data:function(){return{icon:"",name:"",optionName:"",ligature:""}},methods:{click:function(){},new:function(){var t=this;this.$root.paint.state.resetState();var i=this.$root.paint.canvas.undoElement,o=this.$root.paint.canvas.undoContext;o.fillStyle="#ffffff",o.fillRect(0,0,i.width,i.height),["draw","active","tool"].forEach(function(i){t.$root.paint.canvas[i+"Element"].width=t.$root.paint.canvas[i+"Element"].width,t.$root.paint.canvas[i+"Context"].lineCap="round"}),(o=this.$root.paint.canvas.drawContext).fillStyle="#ffffff",o.fillRect(0,0,i.width,i.height),this.$root.paint.canvas.undoElement.width=this.$root.paint.canvas.undoElement.width,this.$root.paint.state.setColor(this.$root.paint.options.color),this.$root.paint.state.setLineWidth(this.$root.paint.options.lineWidth)}}},dt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:["main-menu-option",t.name],on:{click:function(i){return t.click()}}},[o("div",{staticClass:"menu-option-icon"},[o("i",{class:t.icon},[t._v(t._s(t.ligature))])]),t._v(" "),o("div",{staticClass:"menu-option-name"},[t._v("\n        "+t._s(t.optionName)+"\n    ")])])},staticRenderFns:[]};var pt=o("VU/8")(ut,dt,!1,function(t){o("Gfo9")},null,null).exports,ft={data:function(){return{icon:"far fa-file",name:"new",optionName:"New"}},extends:pt,mounted:function(){this.$root.$on("action-new",this.new)},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.$root.paint.state.dirtySave?(b()(this.$root.paint.state.confirm,{confirmDialog:!0,message:["There are unsaved changes to this drawing.","Are you sure you want to discard the drawing?"],confirmAction:"action-new"}),this.$root.$emit("show-dialog","confirm-dialog")):this.new()}}},vt=o("VU/8")(ft,null,!1,null,null,null).exports,mt={data:function(){return{filename:"",selectionArea:{}}},mounted:function(){var t=this;this.$root.$on("selection-cleared",function(i){i===t.getSaveSelectionSemaphore()&&t.saveContinued(!0)})},methods:{save:function(t,i){this.filename=t||"drawing.png",i&&this.$root.paint.state.selection?(this.selectionArea.x=this.$root.paint.state.selection.x,this.selectionArea.y=this.$root.paint.state.selection.y,this.selectionArea.width=this.$root.paint.state.selection.width,this.selectionArea.height=this.$root.paint.state.selection.height,this.$root.$emit("clear-selection",this.getSaveSelectionSemaphore())):this.saveContinued(!1)},saveContinued:function(t){var i,o=document.querySelector("div.canvas").getBoundingClientRect(),e=this.$root.paint.canvas.drawContext,n=void 0,a=this.$root.paint.canvas.undoElement,s=this.$root.paint.canvas.undoContext,l=a.width,r=a.height,c=void 0,h=void 0,u=void 0;t?(n=e.getImageData(this.selectionArea.x,this.selectionArea.y,this.selectionArea.width,this.selectionArea.height),c=this.selectionArea.width,h=this.selectionArea.height):(n=e.getImageData(0,0,o.width,o.height),c=o.width,h=o.height),a.width=c,a.height=h,s.putImageData(n,0,0),i=a.toDataURL(),(u=document.createElement("a")).href=i,u.download=this.filename,u.click(),this.$root.paint.state.dirtySave=!1,a.width=l,a.height=r,s.stokeStyle=this.$root.paint.options.color,s.fillStyle=this.$root.paint.options.color,s.lineWidth=this.$root.paint.options.lineWidth,s.lineCap="round",t&&(this.$root.paint.state.selection={x:this.selectionArea.x,y:this.selectionArea.y,width:this.selectionArea.width,height:this.selectionArea.height},this.$root.$emit("update-selection",function(t){return t}))},getSaveSelectionSemaphore:function(){return"save-selection-"+this.name}}},gt=o("VU/8")(mt,null,!1,null,null,null).exports,$t={data:function(){return{icon:"far fa-save",name:"save",optionName:"Save"}},extends:pt,mixins:[gt],mounted:function(){},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.save("Drawing.png",!1)}}},yt={data:function(){return{icon:"far fa-save",name:"save-selection",optionName:"Save Selection"}},extends:pt,mixins:[gt],mounted:function(){},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.save("Drawing.png",!0)}}};var xt={data:function(){return{icon:"far fa-folder-open",name:"open",optionName:"Open",fileInputElement:null}},extends:pt,mounted:function(){this.$root.$on("action-open",this.open),this.fileInputElement=document.createElement("input"),this.fileInputElement.type="file",this.fileInputElement.addEventListener("change",this.processFile)},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.$root.paint.state.dirtySave?(b()(this.$root.paint.state.confirm,{confirmDialog:!0,message:["There are unsaved changes to this drawing.","Are you sure you want to discard the drawing?"],confirmAction:"action-open"}),this.$root.$emit("show-dialog","confirm-dialog")):this.open()},open:function(){this.fileInputElement.click()},processFile:function(){var t=this;if(window.File&&window.FileReader){var i,o=void 0,e=void 0,n=function(){t.new(),t.$root.paint.canvas.drawContext.drawImage(e,0,0)},a=function(){t.$root.paint.state.confirm.confirmDialog=!1,t.$root.paint.state.confirm.confirmAction=null,t.$root.paint.state.confirm.confirmOption="OK",t.$root.paint.state.confirm.message=["Oops! This file can't be opened.","Either this file is not an image or PaintBuddy.cc does not know how to open it.","Please try a different file."],t.$root.$emit("show-dialog","confirm-dialog")};(i=this.fileInputElement.files[0])&&((o=new FileReader).onload=function(){(e=new Image).onload=n,e.onerror=a,e.src=o.result},o.readAsDataURL(i))}else this.$root.paint.state.confirm.confirmDialog=!1,this.$root.paint.state.confirm.message=["Uh oh, there's an error!","Your web browser does not support this feature","If possible, please use this app in a modern web browser like Google Chrome, Firefox, or Safari"],this.$root.$emit("show-confirm-dialog")}}},wt={data:function(){return{icon:"material-icons",name:"report-issue",optionName:"Report an Issue",ligature:"error_outline"}},extends:pt,mounted:function(){},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.$root.paint.state.confirm.confirmDialog=!1,this.$root.paint.state.confirm.confirmAction="",this.$root.paint.state.confirm.confirmOption="OK",this.$root.paint.state.confirm.template='\n    <p>Did you find an issue while using PaintBuddy.cc? Send an email to us and let us fix or address it! \n    Email us at <a href="mailto:dev@paintbuddy.cc">dev@paintbuddy.cc</a>.<p>\n    <p>For those who have a GitHub account, you can \n    <a href="https://github.com/mbplautz/paintbuddy.cc/issues">open an issue directly on the code repository</a>.</p>\n',this.$root.$emit("show-dialog","confirm-dialog")}}};var Ct={data:function(){return{icon:"far fa-comment-alt",name:"about",optionName:"About PaintBuddy.cc"}},extends:pt,mounted:function(){},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.$root.$emit("show-dialog","about-dialog")}}},bt={mounted:function(){},components:{PopupMenu:ht,NewMenuOption:vt,SaveMenuOption:o("VU/8")($t,null,!1,null,null,null).exports,SaveSelectionMenuOption:o("VU/8")(yt,null,!1,function(t){o("wVqK")},null,null).exports,OpenMenuOption:o("VU/8")(xt,null,!1,null,null,null).exports,ReportIssueMenuOption:o("VU/8")(wt,null,!1,function(t){o("gyOD")},null,null).exports,AboutMenuOption:o("VU/8")(Ct,null,!1,null,null,null).exports}},_t={render:function(){var t=this.$createElement,i=this._self._c||t;return i("popup-menu",{attrs:{name:"main-menu"}},[i("div",{staticClass:"main-menu-select"},[i("new-menu-option"),this._v(" "),i("save-menu-option"),this._v(" "),i("save-selection-menu-option"),this._v(" "),i("open-menu-option"),this._v(" "),i("report-issue-menu-option"),this._v(" "),i("about-menu-option")],1)])},staticRenderFns:[]};var St=o("VU/8")(bt,_t,!1,function(t){o("m8zS")},null,null).exports,Et={data:function(){return{name:"copy",icon:"far fa-copy"}},extends:l,methods:{click:function(){this.$root.$emit("copy-selection"),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection}}},Xt={data:function(){return{name:"cut",icon:"fas fa-cut"}},extends:l,methods:{click:function(){this.$root.$emit("cut-selection"),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection}}},Yt={data:function(){return{name:"paste",icon:"far fa-clipboard"}},extends:l,methods:{click:function(){this.$root.$emit("paste-selection"),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.copySelection}}},kt={data:function(){return{name:"flip-horizontal",icon:"material-icons"}},extends:l,mounted:function(){this.$refs["icon-ref"].appendChild(document.createTextNode("flip"))},methods:{click:function(){this.$root.$emit("update-selection",this.transform),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection},transform:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=t.data,n=function(t,o){return 4*(o*i+t)},a=Math.floor(i/2),s=void 0,l=void 0,r=void 0,c=void 0,h=void 0,u=void 0;for(s=0;s<=a;s++)for(l=0;l<o;l++)for(r=n(s,l),c=n(i-1-s,l),h=0;h<4;h++)u=e[r+h],e[r+h]=e[c+h],e[c+h]=u;return t}}},Ft={data:function(){return{name:"flip-vertical",icon:"material-icons"}},extends:l,mounted:function(){this.$refs["icon-ref"].appendChild(document.createTextNode("flip"))},methods:{click:function(){this.$root.$emit("update-selection",this.transform),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection},transform:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=t.data,n=function(t,o){return 4*(o*i+t)},a=Math.floor(o/2),s=void 0,l=void 0,r=void 0,c=void 0,h=void 0,u=void 0;for(l=0;l<=a;l++)for(s=0;s<i;s++)for(r=n(s,l),c=n(s,o-1-l),h=0;h<4;h++)u=e[r+h],e[r+h]=e[c+h],e[c+h]=u;return t}}};var Tt={data:function(){return{name:"rotate-cw",icon:"material-icons"}},extends:l,mounted:function(){this.$refs["icon-ref"].appendChild(document.createTextNode("rotate_90_degrees_ccw"))},methods:{click:function(){this.$root.$emit("update-selection",this.transform),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection},transform:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=this.$root.paint.canvas.toolElement,n=t.data,a=function(t,i){return 4*(i*o+t)},s=this.$root.paint.state.selection.x+this.$root.paint.state.selection.width/2,l=this.$root.paint.state.selection.y+this.$root.paint.state.selection.height/2,r=new ImageData(new Uint8ClampedArray(n.length),o,i),c=void 0,h=void 0,u=o-1,d=0;for(c=0;c<n.length;c+=4)h=a(u,d),r.data[h]=n[c],r.data[h+1]=n[c+1],r.data[h+2]=n[c+2],r.data[h+3]=n[c+3],++d>=i&&(d=0,u--);this.$root.paint.state.selection.x=s-o/2,this.$root.paint.state.selection.y=l-i/2,this.$root.paint.state.selection.width=o,this.$root.paint.state.selection.height=i;var p=this.$root.paint.state.selection.x+this.$root.paint.state.selection.width,f=this.$root.paint.state.selection.y+this.$root.paint.state.selection.height;return p>=e.width&&(this.$root.paint.state.selection.x-=p-e.width),this.$root.paint.state.selection.x<0&&(this.$root.paint.state.selection.x=0),f>=e.height&&(this.$root.paint.state.selection.y-=f-e.height),this.$root.paint.state.selection.y<0&&(this.$root.paint.state.selection.y=0),r}}};var Pt={data:function(){return{name:"rotate-ccw",icon:"material-icons"}},extends:l,mounted:function(){this.$refs["icon-ref"].appendChild(document.createTextNode("rotate_90_degrees_ccw"))},methods:{click:function(){this.$root.$emit("update-selection",this.transform),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection},transform:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=this.$root.paint.canvas.toolElement,n=t.data,a=function(t,i){return 4*(i*o+t)},s=this.$root.paint.state.selection.x+this.$root.paint.state.selection.width/2,l=this.$root.paint.state.selection.y+this.$root.paint.state.selection.height/2,r=new ImageData(new Uint8ClampedArray(n.length),o,i),c=void 0,h=void 0,u=0,d=i-1;for(c=0;c<n.length;c+=4)h=a(u,d),r.data[h]=n[c],r.data[h+1]=n[c+1],r.data[h+2]=n[c+2],r.data[h+3]=n[c+3],--d<0&&(d=i-1,u++);this.$root.paint.state.selection.x=s-o/2,this.$root.paint.state.selection.y=l-i/2,this.$root.paint.state.selection.width=o,this.$root.paint.state.selection.height=i;var p=this.$root.paint.state.selection.x+this.$root.paint.state.selection.width,f=this.$root.paint.state.selection.y+this.$root.paint.state.selection.height;return p>=e.width&&(this.$root.paint.state.selection.x-=p-e.width),this.$root.paint.state.selection.x<0&&(this.$root.paint.state.selection.x=0),f>=e.height&&(this.$root.paint.state.selection.y-=f-e.height),this.$root.paint.state.selection.y<0&&(this.$root.paint.state.selection.y=0),r}}},Rt={components:{PopupMenu:ht,CopyTool:o("VU/8")(Et,null,!1,null,null,null).exports,CutTool:o("VU/8")(Xt,null,!1,null,null,null).exports,PasteTool:o("VU/8")(Yt,null,!1,null,null,null).exports,FlipHorizontalTool:o("VU/8")(kt,null,!1,null,null,null).exports,FlipVerticalTool:o("VU/8")(Ft,null,!1,function(t){o("12tn")},null,null).exports,RotateCwTool:o("VU/8")(Tt,null,!1,function(t){o("Ahp8")},null,null).exports,RotateCcwTool:o("VU/8")(Pt,null,!1,null,null,null).exports}},Dt={render:function(){var t=this.$createElement,i=this._self._c||t;return i("popup-menu",{attrs:{name:"copy-menu"}},[i("div",{staticClass:"copy-tool-select"},[i("div",{staticClass:"copy-tool-option"},[i("copy-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("cut-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("paste-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("flip-horizontal-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("flip-vertical-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("rotate-cw-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("rotate-ccw-tool")],1)])])},staticRenderFns:[]};var Mt=o("VU/8")(Rt,Dt,!1,function(t){o("6FqT")},null,null).exports,Ut={props:{color:{type:String,default:""}},methods:{isSelected:function(){return this.$root.paint.options.color===this.color},select:function(){this.$root.paint.state.setColor(this.color),this.$root.$emit("hide-popup","color-menu")}}},Vt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"color-option-border",style:"border-color: "+(t.isSelected()?"#64a5e7":"#a0a0a0")+";",on:{click:function(i){return t.select()}}},[o("div",{staticClass:"color-option",style:"background-color: "+t.color+";"})])},staticRenderFns:[]};var At={data:function(){return{colorList:[{rowIndex:0,colors:["#000000","#7f7f7f","#880015","#ed1c24","#ff7f27","#fff200","#22b14c","#00a2e8","#3f48cc","#a349a4"]},{rowIndex:1,colors:["#ffffff","#c3c3c3","#b97a57","#ffaec9","#ffc90e","#efe4b0","#b5e61d","#99d9ea","#7092be","#c8bfe7"]}]}},components:{PopupMenu:ht,ColorOption:o("VU/8")(Ut,Vt,!1,function(t){o("AldA")},null,null).exports},methods:{ordinate:function(t){return t.map(function(t,i){return{color:t,index:i}})}}},Bt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("popup-menu",{attrs:{name:"color-menu"}},[o("div",{staticClass:"color-select"},t._l(t.colorList,function(i){return o("div",{key:i.rowIndex,staticClass:"color-select-row"},t._l(t.ordinate(i.colors),function(t){return o("color-option",{key:t.index,attrs:{color:t.color}})}),1)}),0)])},staticRenderFns:[]};var It=o("VU/8")(At,Bt,!1,function(t){o("2D1X")},null,null).exports,Wt={components:{PopupMenu:ht},data:function(){return{shapeListRows:(t=z,i=[],o=0,e={elements:[],key:o++},a()(t).forEach(function(n){e.elements.push({name:n,points:t[n]}),e.elements.length>=6&&(i.push(e),e={elements:[],key:o++})}),e.elements.length>0&&i.push(e),i)};var t,i,o,e},methods:{select:function(t){this.$root.paint.options.selectedShape=t,this.$root.$emit("hide-popup","shape-menu")},isSelected:function(t){return this.$root.paint.options.selectedShape===t}},filters:{pointsFilter:function(t){return t.reduce(function(t,i){return t+(100*i.x+",")+100*i.y+" "},"")}}},Lt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("popup-menu",{attrs:{name:"shape-menu"}},[o("div",{staticClass:"shape-select"},t._l(t.shapeListRows,function(i){return o("div",{key:i.key,staticClass:"shape-select-row"},t._l(i.elements,function(i){return o("div",{key:i.name,staticClass:"shape-select-cell",on:{click:function(o){return t.select(i.name)}}},[o("div",{class:["option",t.isSelected(i.name)?"selected-option":""]},[o("svg",{attrs:{width:"100%",viewBox:"0 0 100 100"}},[o("polygon",{attrs:{stroke:"#000000","stroke-width":"4",fill:"none",points:t._f("pointsFilter")(i.points)}})])])])}),0)}),0)])},staticRenderFns:[]};var zt=o("VU/8")(Wt,Lt,!1,function(t){o("TlmB")},null,null).exports,Ot={props:{lineWidth:{type:Number,default:1}},methods:{isSelected:function(){return this.$root.paint.options.lineWidth===this.lineWidth},click:function(){this.$root.paint.state.setLineWidth(this.lineWidth),this.$root.$emit("hide-popup","line-width-menu")}},filters:{lineWidthFilter:function(t){return"height: "+t+"px;"}}},Gt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:["line-width-option",t.isSelected()?"line-width-selected":""],on:{click:function(i){return t.click()}}},[o("div",{staticClass:"line-width-display",style:t._f("lineWidthFilter")(t.lineWidth)})])},staticRenderFns:[]};var qt={data:function(){return{lineWidthList:[1,3,5,8]}},components:{PopupMenu:ht,LineWidthOption:o("VU/8")(Ot,Gt,!1,function(t){o("XUvm")},null,null).exports},methods:{ordinate:function(t){return t.map(function(t,i){return{width:t,index:i}})}}},Nt={render:function(){var t=this.$createElement,i=this._self._c||t;return i("popup-menu",{attrs:{name:"line-width-menu"}},[i("div",{staticClass:"line-width-select"},this._l(this.ordinate(this.lineWidthList),function(t){return i("line-width-option",{key:t.index,attrs:{"line-width":t.width}})}),1)])},staticRenderFns:[]},Ht=o("VU/8")(qt,Nt,!1,null,null,null).exports,Qt={components:{PopupMenu:ht},methods:{isFill:function(){return this.$root.paint.options.filledPolygon},setFill:function(t){this.$root.paint.options.filledPolygon=t,this.$root.$emit("hide-popup","filled-polygon-menu")}}},jt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("popup-menu",{attrs:{name:"filled-polygon-menu"}},[o("div",{staticClass:"filled-polygon-select"},[o("div",{class:["option",t.isFill()?"":"selected-option"],on:{click:function(i){return t.setFill(!1)}}},[o("div",{staticClass:"no-fill-option"})]),t._v(" "),o("div",{class:["option",t.isFill()?"selected-option":""],on:{click:function(i){return t.setFill(!0)}}},[o("div",{staticClass:"fill-option"})])])])},staticRenderFns:[]};var Kt=o("VU/8")(Qt,jt,!1,function(t){o("FzsO")},null,null).exports,Jt={components:{PopupMenu:ht},methods:{isTransparentSelection:function(){return this.$root.paint.options.transparentSelection},setTransparentSelection:function(t){this.$root.paint.options.transparentSelection=t,this.$root.$emit("hide-popup","transparent-selection-menu"),this.$root.$emit("update-selection")}}},Zt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("popup-menu",{attrs:{name:"transparent-selection-menu"}},[o("div",{staticClass:"transparent-selection-select"},[o("div",{class:["option",t.isTransparentSelection()?"":"selected-option"],on:{click:function(i){return t.setTransparentSelection(!1)}}},[o("div",{staticClass:"no-fill-option"})]),t._v(" "),o("div",{class:["option",t.isTransparentSelection()?"selected-option":""],on:{click:function(i){return t.setTransparentSelection(!0)}}},[o("div",{staticClass:"fill-option"})])])])},staticRenderFns:[]};var ti=o("VU/8")(Jt,Zt,!1,function(t){o("qDae")},null,null).exports,ii={data:function(){return{visible:!1}},props:{name:{type:String,default:""}},mounted:function(){var t=this;this.$root.$on("show-dialog",function(i){i===t.name&&t.show()}),this.$root.$on("hide-dialog",function(i){i===t.name&&t.hide()})},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1,this.$root.paint.state.confirm.confirmOption=null,this.$root.paint.state.confirm.template=null}}},oi={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:["dialog-box-container",t.name,t.visible?"dialog-box-visible":"dialog-box-invisible"]},[o("div",{staticClass:"dialog-box-outer"},[o("div",{staticClass:"dialog-box-overlay"}),t._v(" "),o("div",{staticClass:"dialog-box-window-container",on:{click:function(i){return t.hide()}}},[t._t("default")],2)])])},staticRenderFns:[]};var ei=o("VU/8")(ii,oi,!1,function(t){o("va5u")},null,null).exports,ni={components:{DialogBox:ei},mounted:function(){},methods:{action:function(){this.hide(),this.$root.$emit(this.$root.paint.state.confirm.confirmAction)},hide:function(){this.$root.$emit("hide-dialog","confirm-dialog")},ordinate:function(t){return(Array.isArray(t)?t:[t]).map(function(t,i){return{element:t,index:i}})},preventDefault:function(t){t.stopPropagation()}}},ai={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("dialog-box",{attrs:{name:"confirm-dialog"}},[o("div",{staticClass:"confirm-dialog-window",on:{click:function(i){return t.preventDefault(i)}}},[t.$root.paint.state.confirm.template?t._e():o("div",{staticClass:"message-panel"},t._l(t.ordinate(t.$root.paint.state.confirm.message),function(i){return o("p",{key:i.index},[t._v("\n                "+t._s(i.element)+"\n            ")])}),0),t._v(" "),t.$root.paint.state.confirm.template?o("div",{staticClass:"message-panel"},[o("div",{domProps:{innerHTML:t._s(t.$root.paint.state.confirm.template)}})]):t._e(),t._v(" "),o("div",{staticClass:"button-panel"},[o("div",{staticClass:"button-span"},[t.$root.paint.state.confirm.confirmDialog?o("div",{staticClass:"button cancel-button",on:{click:function(i){return t.hide()}}},[o("a",[o("i",{staticClass:"fas fa-times-circle"}),t._v("\n                        Cancel\n                    ")])]):t._e(),t._v(" "),o("div",{staticClass:"button confirm-button",on:{click:function(i){(t.$root.paint.state.confirm.confirmDialog?t.action:t.hide)()}}},[o("a",[o("i",{staticClass:"fas fa-check-circle"}),t._v("\n                        "+t._s(t.$root.paint.state.confirm.confirmOption?t.$root.paint.state.confirm.confirmOption:"Confirm")+"\n                    ")])])])])])])},staticRenderFns:[]};var si={components:{DialogBox:ei},mounted:function(){},methods:{hide:function(){this.$root.$emit("hide-dialog","about-dialog")},preventDefault:function(t){t.stopPropagation()}}},li={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("dialog-box",{attrs:{name:"about-dialog"}},[o("div",{staticClass:"about-dialog-window",on:{click:function(i){return t.preventDefault(i)}}},[o("div",{staticClass:"content-panel"},[o("div",{staticClass:"content header"},[o("img",{attrs:{src:"/static/icon.png",width:"64",height:"64",alt:"PaintBuddy.cc Logo"}}),t._v(" "),o("div",[o("div",[o("strong",[t._v("PaintBuddy.cc")])]),t._v(" "),o("div",[t._v("The Simple TouchScreen Drawing Web App")])])]),t._v(" "),o("div",{staticStyle:{"margin-top":"10px"}},[o("span",{staticClass:"version"},[t._v("v 0.9.3")]),t._v(" "),o("span",{staticClass:"author"},[o("em",[t._v("by Michael Plautz")])])]),t._v(" "),o("div",{staticClass:"spacer"}),t._v(" "),o("div",{staticClass:"content"},[o("img",{attrs:{src:"https://vuejs.org/images/logo.png",width:"48",height:"48",alt:"vue logo"}}),t._v(" "),o("div",[t._v("Built using "),o("a",{attrs:{href:"https://vuejs.org"}},[t._v("Vue.js")])])]),t._v(" "),o("div",{staticClass:"content"},[o("div",{staticStyle:{height:"48px",width:"48px",overflow:"hidden","margin-right":"16px"}},[o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3046.7 875.7",height:"48"}},[o("path",{attrs:{fill:"#FFF",d:"M387 0l387 218.9v437.9L387 875.7 0 656.8V218.9L387 0z"}}),o("path",{attrs:{fill:"#8ED6FB",d:"M704.9 641.7L399.8 814.3V679.9l190.1-104.6 115 66.4zm20.9-18.9V261.9l-111.6 64.5v232l111.6 64.4zM67.9 641.7L373 814.3V679.9L182.8 575.3 67.9 641.7zM47 622.8V261.9l111.6 64.5v232L47 622.8zm13.1-384.3L373 61.5v129.9L172.5 301.7l-1.6.9-110.8-64.1zm652.6 0l-312.9-177v129.9l200.5 110.2 1.6.9 110.8-64z"}}),o("path",{attrs:{fill:"#1C78C0",d:"M373 649.3L185.4 546.1V341.8L373 450.1v199.2zm26.8 0l187.6-103.1V341.8L399.8 450.1v199.2zM198.1 318.2l188.3-103.5 188.3 103.5-188.3 108.7-188.3-108.7z"}}),o("path",{attrs:{fill:"#F5FAFA",d:"M1164.3 576.3h82.5l84.1-280.2h-80.4l-49.8 198.8-53.1-198.8H1078l-53.6 198.8-49.3-198.8h-80.4l83.6 280.2h82.5l52-179.5 51.5 179.5zM1335.2 437c0 84.1 57.3 146.3 147.4 146.3 69.7 0 107.2-41.8 117.9-61.6l-48.8-37c-8 11.8-30 34.3-68.1 34.3-41.3 0-71.3-26.8-72.9-64.3H1608c.5-5.4.5-10.7.5-16.1 0-91.6-49.3-149.5-136.1-149.5-79.9 0-137.2 63.2-137.2 147.9zm77.7-30.6c3.2-32.1 25.7-56.8 60.6-56.8 33.8 0 58.4 22.5 60 56.8h-120.6zm223.5 169.9h69.7v-28.9c7.5 9.1 35.4 35.9 83.1 35.9 80.4 0 137.2-60.5 137.2-146.8 0-86.8-52.5-147.3-132.9-147.3-48.2 0-76.1 26.8-83.1 36.4V188.9h-73.9v387.4h-.1zm71.8-139.3c0-52.5 31.1-82.5 71.8-82.5 42.9 0 71.8 33.8 71.8 82.5 0 49.8-30 80.9-71.8 80.9-45 0-71.8-36.5-71.8-80.9zm247 239.5h73.9V547.3c7 9.1 34.8 35.9 83.1 35.9 80.4 0 132.9-60.5 132.9-147.3 0-85.7-56.8-146.8-137.2-146.8-47.7 0-75.6 26.8-83.1 36.4V296h-69.7v380.5h.1zm71.8-241.1c0-44.5 26.8-80.9 71.8-80.9 41.8 0 71.8 31.1 71.8 80.9 0 48.8-28.9 82.5-71.8 82.5-40.7 0-71.8-30-71.8-82.5zm231.5 54.1c0 58.9 48.2 93.8 105 93.8 32.2 0 53.6-9.6 68.1-25.2l4.8 18.2h65.4V398.9c0-62.7-26.8-109.8-116.8-109.8-42.9 0-85.2 16.1-110.4 33.2l27.9 50.4a165.2 165.2 0 0 1 74.5-19.8c32.7 0 50.9 16.6 50.9 41.3v18.2c-10.2-7-32.2-15.5-60.6-15.5-65.4-.1-108.8 37.4-108.8 92.6zm73.9-2.2c0-23 19.8-39.1 48.2-39.1s48.8 14.5 48.8 39.1c0 23.6-20.4 38.6-48.2 38.6s-48.8-15.5-48.8-38.6zm348.9 30.6c-46.6 0-79.8-33.8-79.8-81.4 0-45 29.5-82 77.2-82a95.2 95.2 0 0 1 65.4 26.8l20.9-62.2a142.6 142.6 0 0 0-88.4-30c-85.2 0-149 62.7-149 147.9s62.2 146.3 149.5 146.3a141 141 0 0 0 87.3-30l-19.8-60.5c-12.4 10.1-34.9 25.1-63.3 25.1zm110.9 58.4h73.9V431.6l93.8 144.7h86.8L2940.6 423l98.6-127h-83.1l-90 117.9v-225h-73.9v387.4z"}})])]),t._v(" "),o("div",[t._v("Code bundled using "),o("a",{attrs:{href:"https://webpack.js.org/"}},[t._v("Webpack")])])]),t._v(" "),o("div",{staticClass:"content"},[o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"48",height:"48"}},[o("path",{attrs:{fill:"#339af0",d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}}),t._v(" "),o("g",{attrs:{transform:"translate(224 256)"}},[o("g",{attrs:{transform:"translate(0, 0)  scale(0.5625, 0.5625)  rotate(0 0 0)"}},[o("path",{attrs:{fill:"#ffffff",d:"M444.373 359.424c0 7.168-6.144 10.24-13.312 13.312-28.672 12.288-59.392 23.552-92.16 23.552-46.08 0-67.584-28.672-122.88-28.672-39.936 0-81.92 14.336-115.712 29.696-2.048 1.024-4.096 1.024-6.144 2.048v77.824c0 21.405-16.122 34.816-33.792 34.816-19.456 0-34.816-15.36-34.816-34.816V102.4C12.245 92.16 3.029 75.776 3.029 57.344 3.029 25.6 28.629 0 60.373 0s57.344 25.6 57.344 57.344c0 18.432-8.192 34.816-22.528 45.056v31.744c4.124-1.374 58.768-28.672 114.688-28.672 65.27 0 97.676 27.648 126.976 27.648 38.912 0 81.92-27.648 92.16-27.648 8.192 0 15.36 6.144 15.36 13.312v240.64z",transform:"translate(-224 -256)"}})])])]),t._v(" "),o("div",[t._v("Icons provided by "),o("a",{attrs:{href:"https://fontawesome.com/"}},[t._v("FontAwesome")])])]),t._v(" "),o("div",{staticClass:"content"},[o("img",{attrs:{src:"https://material.io/resources/icons/static/ic_material_192px_light.svg",width:"48",height:"48"}}),t._v(" "),o("div",[t._v("and "),o("a",{attrs:{href:"https://material.io/"}},[t._v("Google Material Icons")])])]),t._v(" "),o("div",{staticClass:"spacer"}),t._v(" "),o("div",[t._v("Flood fill algorithm by "),o("a",{attrs:{href:"https://github.com/1j01/jspaint"}},[t._v("Isaiah Odhner")])]),t._v(" "),o("div",[t._v("Color parse function by "),o("a",{attrs:{href:"https://bl.ocks.org/jon-hall"}},[t._v("Jon Hall")])]),t._v(" "),o("div",{staticClass:"spacer"}),t._v(" "),o("div",{staticClass:"content"},[o("svg",{staticClass:"octicon octicon-mark-github v-align-middle",attrs:{height:"48",viewBox:"0 0 16 16",version:"1.1",width:"48","aria-hidden":"true"}},[o("path",{attrs:{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"}})]),t._v(" "),o("div",[t._v("PaintBuddy.cc is an Open Source Project. Check out the source code on "),o("a",{attrs:{href:"https://github.com/mbplautz/paintbuddy.cc"}},[t._v("GitHub")]),t._v(".")])])]),t._v(" "),o("div",{staticClass:"button-panel"},[o("div",{staticClass:"button-span"},[o("div",{staticClass:"button ok-button",on:{click:function(i){return t.hide()}}},[o("a",[o("i",{staticClass:"fas fa-check-circle"}),t._v("\n                        OK\n                    ")])])])])])])},staticRenderFns:[]};var ri={data:function(){return{}},components:{MainMenu:St,CopyMenu:Mt,ColorMenu:It,ShapeMenu:zt,LineWidthMenu:Ht,FilledPolygonMenu:Kt,TransparentSelectionMenu:ti,ConfirmDialog:o("VU/8")(ni,ai,!1,function(t){o("1NPp")},null,null).exports,AboutDialog:o("VU/8")(si,li,!1,function(t){o("qzWL")},null,null).exports}},ci={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"menu"},[o("main-menu"),t._v(" "),o("copy-menu"),t._v(" "),o("color-menu"),t._v(" "),o("shape-menu"),t._v(" "),o("line-width-menu"),t._v(" "),o("filled-polygon-menu"),t._v(" "),o("transparent-selection-menu"),t._v(" "),o("confirm-dialog"),t._v(" "),o("about-dialog")],1)},staticRenderFns:[]},hi={data:function(){return{}},mixins:[S],created:function(){var t=this;this.$root.paint={function:{touch:function(){},drag:function(){},release:function(){},moveTouch:function(){},moveDrag:function(){},moveRelease:function(){}},options:{color:"#000000",lineWidth:3,transparentSelection:!1,filledPolygon:!1,selectedShape:a()(z)[0]},canvas:{toolElement:null,toolContext:null,activeElement:null,activeContext:null,drawElement:null,drawContext:null,undoElement:null,undoContext:null},tool:{},state:{setColor:function(i){if(t.$root.paint.state.drawing)t.$root.paint.state._colorTo=i;else{t.$root.paint.state._colorTo=null,t.$root.paint.options.color=i;var o=t.$root.paint.canvas;o.drawContext.strokeStyle=i,o.drawContext.fillStyle=i,o.activeContext.strokeStyle=i,o.activeContext.fillStyle=i,o.undoContext.strokeStyle=i,o.undoContext.fillStyle=i}},setLineWidth:function(i){if(t.$root.paint.state.drawing)t.$root.paint.state._lineWidthTo=i;else{t.$root.paint.state._lineWidthTo=null,t.$root.paint.options.lineWidth=i;var o=t.$root.paint.canvas;o.drawContext.lineWidth=i,o.activeContext.lineWidth=i,o.undoContext.lineWidth=i}},setTouchFunctions:function(i,o,e){t.$root.paint.state.drawing?t.$root.paint.state._touchFunctionsTo={touchFunction:i,dragFunction:o,releaseFunction:e}:(t.$root.paint.state._touchFunctionsTo=null,t.$root.paint.function.touch=i,t.$root.paint.function.drag=o,t.$root.paint.function.release=e)},saveUndoMap:function(i){t.$root.paint.state.dirty=!0,t.$root.paint.state.dirtySave=!0,t.$root.paint.state.canRedo=!1,t.$root.paint.state._redoQueue.length=0,t.$root.paint.state._undoQueue.push(i)},undo:function(){if(t.$root.paint.state._undoQueue.length>0){var i=t.$root.paint.canvas.drawElement,o=t.$root.paint.canvas.drawContext,e=o.getImageData(0,0,i.width,i.height),n=t.$root.paint.state._undoQueue.pop(),s={},l=e.data,r=void 0,c=void 0,h=void 0,u=void 0,d=void 0,p=void 0,f=void 0,v=void 0,m=void 0,g=void 0;a()(n).forEach(function(t){u=255&t,h=65280&t,c=16711680&t,r=4278190080&t,h>>=8,c>>=16,(r>>=24)<0&&(r=256+r),n[t].forEach(function(t){Array.isArray(t)?(g=t[1],t=t[0]):g=t;do{d=l[t],p=l[t+1],f=l[t+2],v=l[t+3],l[t]=r,l[t+1]=c,l[t+2]=h,l[t+3]=u,s[m=v|f<<8|p<<16|d<<24]||(s[m]=[]),s[m].push(t),t+=4}while(t<=g)})}),o.putImageData(e,0,0);var $=t.compressUndoMap(s);t.$root.paint.state._redoQueue.push($),t.$root.paint.state.canRedo=!0,t.$root.paint.state.dirty=t.$root.paint.state._undoQueue.length>0}},redo:function(){if(t.$root.paint.state._redoQueue.length>0){var i=t.$root.paint.canvas.drawElement,o=t.$root.paint.canvas.drawContext,e=o.getImageData(0,0,i.width,i.height),n=t.$root.paint.state._redoQueue.pop(),s={},l=e.data,r=void 0,c=void 0,h=void 0,u=void 0,d=void 0,p=void 0,f=void 0,v=void 0,m=void 0,g=void 0;a()(n).forEach(function(t){u=255&t,h=65280&t,c=16711680&t,r=4278190080&t,h>>=8,c>>=16,(r>>=24)<0&&(r=256+r),n[t].forEach(function(t){Array.isArray(t)?(g=t[1],t=t[0]):g=t;do{d=l[t],p=l[t+1],f=l[t+2],v=l[t+3],l[t]=r,l[t+1]=c,l[t+2]=h,l[t+3]=u,s[m=v|f<<8|p<<16|d<<24]||(s[m]=[]),s[m].push(t),t+=4}while(t<=g)})}),o.putImageData(e,0,0);var $=t.compressUndoMap(s);t.$root.paint.state._undoQueue.push($),t.$root.paint.state.dirty=!0,t.$root.paint.state.canRedo=t.$root.paint.state._redoQueue.length>0}},resetState:function(){var i=t.$root.paint.state;i.drawing=!1,i.dirty=!1,i.dirtySave=!1,i.canRedo=!1,i.selection=null,i._undoQueue.length=0,i._redoQueue.length=0,i._colorTo=null,i._lineWidthTo=null,i._touchFunctionsTo=null},confirm:{confirmDialog:!1,confirmAction:"",confirmOption:null,template:null,message:""},drawing:!1,dirty:!1,dirtySave:!1,canRedo:!1,selection:null,copySelection:null,_undoQueue:[],_redoQueue:[],_colorTo:null,_lineWidthTo:null,_touchFunctionsTo:null}},window.Vue=this.$root},mounted:function(){var t=this,i=this.$root.paint.canvas.drawElement,o=this.$root.paint.canvas.drawContext;o.fillStyle="#ffffff",o.beginPath(),o.rect(0,0,i.width,i.height),o.fill(),setTimeout(function(){return t.$root.$emit("unhide-popups")},250),this.$root.paint.state.setColor(this.$root.paint.options.color),this.$root.paint.state.setLineWidth(this.$root.paint.options.lineWidth);try{document.querySelector("div.brush div.toolbar-button").click()}catch(t){}this.$root.$on("drawing-released",function(){if(t.$root.paint.state._colorTo&&t.$root.paint.state.setColor(t.$root.paint.state._colorTo),t.$root.paint.state._lineWidthTo&&t.$root.paint.state.setLineWidth(t.$root.paint.state._lineWidthTo),t.$root.paint.state._touchFunctionsTo){var i=t.$root.paint.state._touchFunctionsTo;t.$root.paint.state.setTouchFunctions(i.touchFunction,i.dragFunction,i.releaseFunction)}}),window.addEventListener("beforeprint",function(){var i=document.querySelector("div.canvas div.canvas-child"),o=i.getBoundingClientRect(),e=document.createElement("img");e.id="print-img";var n=o.width>0?o.width-1:0,a=o.height>0?o.height-1:0;e.width=n,e.height=a,e.src=t.$root.paint.canvas.drawElement.toDataURL(),i.appendChild(e)}),window.addEventListener("afterprint",function(){var t=document.querySelector("div.canvas div.canvas-child"),i=document.getElementById("print-img");t.removeChild(i)})},components:{PaintToolbar:nt,PaintCanvas:lt,PaintMenu:o("VU/8")(ri,ci,!1,null,null,null).exports}},ui={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("paint-toolbar"),this._v(" "),i("paint-canvas"),this._v(" "),i("paint-menu")],1)},staticRenderFns:[]},di=o("VU/8")(hi,ui,!1,null,null,null).exports;e.a.config.productionTip=!1,new e.a({el:"#app",components:{App:di},template:"<App/>",data:function(){return{paint:{options:{color:"",lineWidth:0,filledPolygon:!1,transparentSelection:!1,selectedShape:""},state:{dirty:!1,canRedo:!1,selection:null,confirm:{confirmDialog:!1,confirmAction:"",confirmOption:null,template:null,message:""}},refs:[]}}}})},TlmB:function(t,i){},US8W:function(t,i){},XUvm:function(t,i){},dJzP:function(t,i){},gHmE:function(t,i){},gyOD:function(t,i){},m8zS:function(t,i){},qDae:function(t,i){},qzWL:function(t,i){},sufU:function(t,i){},va5u:function(t,i){},wVqK:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.28e813a7745305fd9431.js.map