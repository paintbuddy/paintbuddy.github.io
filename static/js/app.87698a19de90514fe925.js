webpackJsonp([1],{"12tn":function(t,i){},"2D1X":function(t,i){},"6FqT":function(t,i){},Ahp8:function(t,i){},AldA:function(t,i){},FJtP:function(t,i){},Fibw:function(t,i){},FzsO:function(t,i){},Ib4x:function(t,i,o){t.exports=function(){return new Worker(o.p+"fe7642c93f25336ca7ad.worker.js")}},IfdC:function(t,i){},K9Gc:function(t,i){},NHnr:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=o("7+uW"),n=o("fZjL"),a=o.n(n),s={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:t.name,on:{click:function(i){(t.isEnabled()?t.click:t.noop)()}}},[o("div",{class:["toolbar-button",t.selected?"selected-item":""]},[o("i",{ref:"icon-ref",class:t.icon,style:t.isEnabled()?"":"color: #bbb;"})])])},staticRenderFns:[]},l=o("VU/8")({data:function(){return{selected:!1}},methods:{isEnabled:function(){return!0},noop:function(){}}},s,!1,null,null,null).exports,r={extends:l,methods:{click:function(){var t=document.querySelector("div."+this.name+" div.toolbar-button"),i=20,o=setInterval(function(){i<0?clearInterval(o):t.style.backgroundColor="rgba(206, 233, 254, "+i--/20+")"},50);this.action()}}},c=o("VU/8")(r,null,!1,null,null,null).exports,h={data:function(){return{name:"menu-button",icon:"fas fa-bars"}},extends:c,methods:{action:function(){console.log("Menu clicked");var t=document.querySelector("div.menu-button div.toolbar-button");this.$root.$emit("show-popup",{name:"main-menu",element:t})}}},u=o("VU/8")(h,null,!1,null,null,null).exports,d={data:function(){return{name:"undo-button",icon:"fas fa-undo"}},extends:c,methods:{action:function(){console.log("Undo clicked"),this.$root.$emit("clear-selection"),this.$root.paint.state.dirty&&this.$root.paint.state.undo()},isEnabled:function(){return this.$root.paint.state.dirty}}},p=o("VU/8")(d,null,!1,null,null,null).exports,f={data:function(){return{name:"redo-button",icon:"fas fa-redo"}},extends:c,methods:{action:function(){console.log("Redo clicked"),this.$root.$emit("clear-selection"),this.$root.paint.state.redo()},isEnabled:function(){return this.$root.paint.state.canRedo}}},v=o("VU/8")(f,null,!1,null,null,null).exports,m={data:function(){return{name:"copy-menu",icon:"far fa-clone"}},extends:l,methods:{click:function(){var t=document.querySelector("div.copy-menu div.toolbar-button");this.$root.$emit("show-popup",{name:"copy-menu",element:t})},isEnabled:function(){return!!this.$root.paint.state.copySelection||!!this.$root.paint.state.selection}}},g=o("VU/8")(m,null,!1,null,null,null).exports,$={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"toolbar-separator"})},staticRenderFns:[]},y=o("VU/8")({data:function(){return{}}},$,!1,null,null,null).exports,x={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"color-tool",on:{click:function(i){return t.click()}}},[o("div",{staticClass:"toolbar-button"},[o("div",{ref:"toolbar-button",staticClass:"color-icon",style:t._f("colorFilter")(t.$root.paint.options.color)})])])},staticRenderFns:[]},w=o("VU/8")({data:function(){return{selected:!1}},methods:{click:function(){var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"color-menu",element:t})}},filters:{colorFilter:function(t){return"background-color: "+t+";"}}},x,!1,null,null,null).exports,C=o("woOf"),b=o.n(C),_={methods:{compressUndoMap:function(t){var i={},o=void 0,e=void 0,n=void 0,s=void 0,l=null,r=null,c=void 0,h=void 0,u=void 0,d=a()(t);for(o in d){for(u=[],i[e=d[o]]=u,h=t[e],l=null,r=null,s=null,c=0;c<h.length;c++)(n=h[c])===s?null===l&&(l=r):null!==l?(u.push([l,r]),l=null):null!==r&&u.push(r),r=n,s=n+4;null!==l?u.push([l,n]):u.push(n)}return i}}},S=o("VU/8")(_,null,!1,null,null,null).exports,E={data:function(){return{icon:"",selected:!1}},extends:l,mixins:[S],mounted:function(){this.$root.$on("deselect",this.deselect)},methods:{click:function(){this.isEnabled()&&(this.$root.$emit("deselect",this.buttonGroup),this.selected=!0,this.$root.paint.state.setTouchFunctions(this.touchFunction,this.dragFunction,this.releaseFunction),this.select())},deselect:function(t){t===this.buttonGroup&&(this.selected=!1,console.log(this.name+" has been deselected"),this.childDeselect&&this.childDeselect())},clearUndoCanvas:function(){var t=this.$root.paint.canvas.undoElement;this.$root.paint.canvas.undoContext.clearRect(0,0,t.width,t.height)},commitDrawing:function(){var t=this.$root.paint.canvas.drawElement,i=this.$root.paint.canvas.drawContext.getImageData(0,0,t.width,t.height),o=this.$root.paint.canvas.undoContext.getImageData(0,0,t.width,t.height),e={},n=i.data,a=o.data,s=n.length,l=void 0,r=void 0,c=void 0,h=void 0,u=void 0,d=void 0;for(l=0;l<s;l+=4)r=a[l],c=a[l+1],h=a[l+2],u=a[l+3],(r||c||h||u)&&(r=n[l],c=n[l+1],h=n[l+2],e[d=(u=n[l+3])|h<<8|c<<16|r<<24]||(e[d]=[]),e[d].push(l));var p=this.compressUndoMap(e);this.$root.paint.state.saveUndoMap(p),t=this.$root.paint.canvas.undoElement,this.$root.paint.canvas.drawContext.drawImage(t,0,0)}}},X=o("VU/8")(E,null,!1,null,null,null).exports,Y='\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" width="10" height="10">\n    <rect x="0" y="0" width="10" height="10" fill="#000000"></rect><rect x="5" y="0" width="5" height="5" fill="#ffffff"></rect>\n    <rect x="0" y="5" width="5" height="5" fill="#ffffff"></rect>\n</svg>\n    '.replace(/\n/g,"").replace(/\s{2,}/g,""),T=document.createElement("img");T.src="data:image/svg+xml;base64,"+btoa(Y),T.height=10,T.width=10;var R={x:100,y:100},F=50,k=50,P={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"select",icon:"fas fa-mouse-pointer",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0},selectionStart:{x:0,y:0},originalPosition:{x:0,y:0,width:0,height:0},dashPattern:null,selectionData:null,originalSelectionData:null,pasted:!1,pastePoint:b()({},R)}},extends:X,mounted:function(){this.$root.$on("clear-selection",this.clearSelection),this.$root.$on("drawing-started",this.clearSelection),this.$root.$on("update-selection",this.updateSelection),this.$root.$on("copy-selection",this.copySelection),this.$root.$on("cut-selection",this.cutSelection),this.$root.$on("paste-selection",this.pasteSelection),this.$root.paint.function.moveTouch=this.moveTouchFunction,this.$root.paint.function.moveDrag=this.moveDragFunction,this.$root.paint.function.moveRelease=this.moveReleaseFunction},methods:{select:function(){console.log("Select Tool clicked")},childDeselect:function(){console.log("Select tool deselect"),this.clearSelection();var t=this.$root.paint.canvas.undoContext;t.fillStyle=this.$root.paint.options.color,(t=this.$root.paint.canvas.activeContext).fillStyle=this.$root.paint.options.color;var i=this.$root.paint.canvas.activeElement;t.clearRect(0,0,i.width,i.height)},touchFunction:function(t){this.clearSelection(),this.pasted=!1;var i=this.$root.paint.canvas.toolElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.toolContext;null===this.dashPattern&&this.buildDashPattern(),a.strokeWidth=1,a.strokeStyle=this.dashPattern,a.clearRect(0,0,i.width,i.height),a.beginPath(),a.rect(e,n,1,1),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.toolElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.toolContext;l.clearRect(0,0,i.width,i.height),l.beginPath();var r=a-e,c=s-n;l.beginPath(),l.rect(e,n,r,c),l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.toolElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.toolContext;if(l.clearRect(0,0,i.width,i.height),n<o){var r=o;o=n,n=r}if(a<e){var c=e;e=a,a=c}var h=n-o,u=a-e;if(h&&u){this.$root.paint.state.selection={x:o,y:e,width:h,height:u},this.originalPosition.x=this.$root.paint.state.selection.x,this.originalPosition.y=this.$root.paint.state.selection.y,this.originalPosition.width=this.$root.paint.state.selection.width,this.originalPosition.height=this.$root.paint.state.selection.height;var d=this.$root.paint.canvas.drawContext;this.$root.paint.canvas.drawElement;this.originalSelectionData=d.getImageData(o,e,h,u),this.selectionData=d.getImageData(o,e,h,u),this.setSelectionTransparency(),this.invertSelectionBorder(!0),l.putImageData(this.selectionData,o,e)}},moveTouchFunction:function(t){var i=this.$root.paint.canvas.toolElement.getBoundingClientRect();"mousedown"===t.type?(this.mouse.initialX=t.clientX-i.left,this.mouse.initialY=t.clientY-i.top):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-i.left,this.touch.initialY=t.touches[0].clientY-i.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY),this.selectionStart.x=this.$root.paint.state.selection.x,this.selectionStart.y=this.$root.paint.state.selection.y;this.$root.paint.canvas.toolContext;this.invertSelectionBorder(!1)},moveDragFunction:function(t){window.stopme&&(window.stopme=!1);var i=this.$root.paint.canvas.toolElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=a-e,r=s-n;this.$root.paint.state.selection.x=this.selectionStart.x+l,this.$root.paint.state.selection.y=this.selectionStart.y+r;var c=this.$root.paint.canvas.toolContext;if(c.clearRect(0,0,i.width,i.height),!this.pasted){var h=this.$root.paint.canvas.activeContext;h.fillStyle="#ffffff",h.fillRect(this.originalPosition.x,this.originalPosition.y,this.originalPosition.width,this.originalPosition.height)}c.putImageData(this.selectionData,this.$root.paint.state.selection.x,this.$root.paint.state.selection.y)},moveReleaseFunction:function(t){var i=this.$root.paint.canvas.toolElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=n-o,r=a-e;this.$root.paint.state.selection.x=this.selectionStart.x+l,this.$root.paint.state.selection.y=this.selectionStart.y+r;var c=this.$root.paint.canvas.toolContext;if(c.clearRect(0,0,i.width,i.height),!this.pasted){var h=this.$root.paint.canvas.activeContext;h.fillStyle="#ffffff",h.fillRect(this.originalPosition.x,this.originalPosition.y,this.originalPosition.width,this.originalPosition.height)}this.invertSelectionBorder(!0),c.putImageData(this.selectionData,this.$root.paint.state.selection.x,this.$root.paint.state.selection.y)},updateSelection:function(t){if(t&&(this.originalSelectionData=t(this.originalSelectionData),this.selectionData=new ImageData(Uint8ClampedArray.from(this.originalSelectionData.data),this.originalSelectionData.width,this.originalSelectionData.height),this.invertSelectionBorder(!0)),this.$root.paint.state.selection){var i=this.$root.paint.canvas.toolElement,o=this.$root.paint.canvas.toolContext;if(o.clearRect(0,0,i.width,i.height),!this.pasted){var e=this.$root.paint.canvas.activeContext;e.fillStyle="#ffffff",e.fillRect(this.originalPosition.x,this.originalPosition.y,this.originalPosition.width,this.originalPosition.height)}this.setSelectionTransparency(),o.putImageData(this.selectionData,this.$root.paint.state.selection.x,this.$root.paint.state.selection.y)}},clearSelection:function(t){if(this.$root.paint.state.selection){this.invertSelectionBorder(!1);var i=this.$root.paint.canvas.undoElement,o=this.$root.paint.canvas.undoContext;o.clearRect(0,0,i.width,i.height),this.pasted||(o.fillStyle="#ffffff",o.fillRect(this.originalPosition.x,this.originalPosition.y,this.originalPosition.width,this.originalPosition.height)),this.setSelectionTransparency(),this.compensateTransparentOverlap(),o.putImageData(this.selectionData,this.$root.paint.state.selection.x,this.$root.paint.state.selection.y),this.$root.paint.state.selection=null;var e=this.$root.paint.canvas.toolElement,n=this.$root.paint.canvas.toolContext;n.clearRect(0,0,e.width,e.height),this.commitDrawing(),n=this.$root.paint.canvas.activeContext,e=this.$root.paint.canvas.activeElement,n.clearRect(0,0,e.width,e.height)}this.$root.$emit("selection-cleared",t)},copySelection:function(){this.$root.paint.state.selection&&(this.$root.paint.state.copySelection=this.originalSelectionData)},cutSelection:function(){this.copySelection();var t=this.$root.paint.canvas.undoElement,i=this.$root.paint.canvas.undoContext;if(i.clearRect(0,0,t.width,t.height),!this.pasted){var o=this.originalPosition.x,e=this.originalPosition.y,n=this.originalPosition.width,a=this.originalPosition.height;i.fillStyle="#ffffff",i.fillRect(o,e,n,a)}this.$root.paint.state.selection=null,t=this.$root.paint.canvas.toolElement,(i=this.$root.paint.canvas.toolContext).clearRect(0,0,t.width,t.height),this.commitDrawing()},pasteSelection:function(){if(this.$root.paint.state.copySelection){this.clearSelection(),this.pasted=!0;var t=this.$root.paint.state.copySelection,i=this.pastePoint.x,o=this.pastePoint.y,e=t.width,n=t.height,a=i+e,s=o+e,l=this.$root.paint.canvas.toolElement.parentElement.getBoundingClientRect(),r=this.$root.paint.canvas.toolContext;a>=l.width&&(i-=a-e)<0&&(i=0),s>=l.height&&(o-=s-e)<0&&(o=0),this.pastePoint.x+=F,this.pastePoint.y+=k,this.pastePoint.x+e>l.width&&(this.pastePoint.x=R.x),this.pastePoint.y+n>l.height&&(this.pastePoint.y=R.y),this.originalSelectionData=t,this.selectionData=new ImageData(Uint8ClampedArray.from(t.data),e,n),this.$root.paint.state.selection={x:i,y:o,width:e,height:n},this.originalPosition={x:i,y:o,width:e,height:n},this.setSelectionTransparency(),this.invertSelectionBorder(!0),r.putImageData(this.selectionData,i,o)}},invertSelectionBorder:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=function(t,o){return 4*(o*i+t)},n=this.selectionData.data,a=this.originalSelectionData.data,s=[{deltaX:1,deltaY:0,bound:function(t,o){return t<i-1}},{deltaX:0,deltaY:1,bound:function(t,i){return i<o-1}},{deltaX:-1,deltaY:0,bound:function(t,i){return t>0}},{deltaX:0,deltaY:-1,bound:function(t,i){return i>0}}],l=0,r=0,c=!0,h=void 0;s.forEach(function(i){do{h=e(l,r),c&&(t?(n[h]=255-a[h],n[h+1]=255-a[h+1],n[h+2]=255-a[h+2],n[h+3]=255):(n[h]=a[h],n[h+1]=a[h+1],n[h+2]=a[h+2],n[h+3]=a[h+3])),c=!c,l+=i.deltaX,r+=i.deltaY}while(i.bound(l,r))})},setSelectionTransparency:function(){if(this.$root.paint.options.transparentSelection){var t=this.selectionData.data,i=void 0;for(i=0;i<t.length;i+=4)this.isBackgroundColor(t,i)&&(t[i+3]=0)}else{var o=this.selectionData.data,e=void 0;for(e=0;e<o.length;e+=4)this.isBackgroundColor(o,e)&&(o[e+3]=255)}},compensateTransparentOverlap:function(){if(this.$root.paint.options.transparentSelection&&this.isSelectionOverlapsOriginal()){var t=void 0,i=void 0,o=void 0,e=void 0,n=this.$root.paint.state.selection.x,a=this.$root.paint.state.selection.y,s=this.$root.paint.state.selection.width,l=this.$root.paint.state.selection.height,r=this.selectionData.data;for(i=0;i<l;i++)for(t=0;t<s;t++)e=a+i,(o=n+t)>=this.originalPosition.x&&e>=this.originalPosition.y&&o<this.originalPosition.x+this.originalPosition.width&&e<this.originalPosition.y+this.originalPosition.height&&(r[4*(i*s+t)+3]=255)}},isSelectionOverlapsOriginal:function(){var t=this.$root.paint.state.selection.x,i=this.$root.paint.state.selection.y,o=t+this.$root.paint.state.selection.width-1,e=i+this.$root.paint.state.selection.height-1,n=this.originalPosition.x,a=this.originalPosition.y,s=n+this.originalPosition.width-1,l=a+this.originalPosition.height-1;return t<s&&n<o&&i<l&&a<e},isBackgroundColor:function(t,i){},buildDashPattern:function(){var t=this.$root.paint.canvas.toolContext;this.dashPattern=t.createPattern(T,"repeat")}}},D=o("VU/8")(P,null,!1,null,null,null).exports,U={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"brush",icon:"fas fa-paint-brush",mouse:{lastX:0,lastY:0},touch:{}}},extends:X,methods:{select:function(){console.log("Brush Tool clicked")},touchFunction:function(t){var i=this;console.log(t);var o=this.$root.paint.canvas.activeElement.getBoundingClientRect();if("mousedown"===t.type){var e=this.$root.paint.canvas.activeContext,n=t.clientX-o.left,a=t.clientY-o.top;e.beginPath(),e.moveTo(n,a),e.lineTo(n,a),e.stroke(),this.mouse.lastX=n,this.mouse.lastY=a}else if("touchstart"===t.type){this.touch={};var s=this.$root.paint.canvas.activeContext;Array.prototype.forEach.call(t.touches,function(t){var e={x:t.clientX-o.left,y:t.clientY-o.top};s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(e.x,e.y),s.stroke(),i.touch[t.identifier]=e})}},dragFunction:function(t){var i=this;console.log(t);var o=this.$root.paint.canvas.activeElement.getBoundingClientRect();if("mousemove"===t.type){var e=t.clientX-o.left,n=t.clientY-o.top,a=this.$root.paint.canvas.activeContext;a.moveTo(this.mouse.lastX,this.mouse.lastY),a.lineTo(e,n),a.stroke(),this.mouse.lastX=e,this.mouse.lastY=n}else if("touchmove"===t.type){var s=this.$root.paint.canvas.activeContext;Array.prototype.forEach.call(t.touches,function(t){var e={x:t.clientX-o.left,y:t.clientY-o.top};s.beginPath(),s.moveTo(i.touch[t.identifier].x,i.touch[t.identifier].y),s.lineTo(e.x,e.y),s.stroke(),i.touch[t.identifier]=e})}},releaseFunction:function(t){console.log(t);var i=this.$root.paint.canvas.activeElement,o=this.$root.paint.canvas.activeContext,e=this.$root.paint.canvas.undoContext;e.clearRect(0,0,i.width,i.height),e.drawImage(i,0,0),o.clearRect(0,0,i.width,i.height),this.commitDrawing()}}},I=o("VU/8")(U,null,!1,null,null,null).exports,V={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"line",icon:"fas fa-slash",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0}}},extends:X,methods:{select:function(){console.log("Line Tool clicked")},touchFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.activeContext;a.clearRect(0,0,i.width,i.height),a.beginPath(),a.moveTo(e,n),a.lineTo(e,n),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l.beginPath(),l.moveTo(e,n),l.lineTo(a,s),l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l=this.$root.paint.canvas.undoContext,i=this.$root.paint.canvas.undoElement,l.clearRect(0,0,i.width,i.height),l.beginPath(),l.moveTo(o,e),l.lineTo(n,a),l.stroke(),this.commitDrawing()}}};var A=o("VU/8")(V,null,!1,function(t){o("FJtP")},null,null).exports,B={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"rectangle",icon:"far fa-square",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0}}},extends:X,methods:{select:function(){console.log("Rectangle Tool clicked")},touchFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.activeContext;a.clearRect(0,0,i.width,i.height),a.beginPath(),a.rect(e,n,1,1),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l.beginPath();var r=a-e,c=s-n;l.beginPath(),l.rect(e,n,r,c),this.$root.paint.options.filledPolygon?l.fill():l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l=this.$root.paint.canvas.undoContext,i=this.$root.paint.canvas.undoElement,l.clearRect(0,0,i.width,i.height);var r=n-o,c=a-e;l.beginPath(),l.rect(o,e,r,c),this.$root.paint.options.filledPolygon?l.fill():l.stroke(),this.commitDrawing()}}},M=o("VU/8")(B,null,!1,null,null,null).exports,W={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"ellipse",icon:"far fa-circle",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0}}},extends:X,methods:{select:function(){console.log("Ellipse Tool clicked")},touchFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.activeContext;a.clearRect(0,0,i.width,i.height),a.beginPath(),a.ellipse(e,n,1,1,0,0,2*Math.PI),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l.beginPath();var r=(a-e)/2,c=(s-n)/2,h=e+r,u=n+c;r<0&&(h=a+(r=-r)),c<0&&(u=s+(c=-c)),l.ellipse(h,u,r,c,0,0,2*Math.PI),this.$root.paint.options.filledPolygon?l.fill():l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),i=this.$root.paint.canvas.undoElement,(l=this.$root.paint.canvas.undoContext).clearRect(0,0,i.width,i.height),l.beginPath();var r=(n-o)/2,c=(a-e)/2,h=o+r,u=e+c;r<0&&(h=n+(r=-r)),c<0&&(u=a+(c=-c)),l.ellipse(h,u,r,c,0,0,2*Math.PI),this.$root.paint.options.filledPolygon?l.fill():l.stroke(),this.commitDrawing()}}},L=o("VU/8")(W,null,!1,null,null,null).exports,q={triangle:[{x:.5,y:0},{x:1,y:1},{x:0,y:1}],rightTriangle:[{x:0,y:0},{x:1,y:1},{x:0,y:1}],diamond:[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1},{x:0,y:.5}],pentagon:[{x:.5,y:0},{x:1,y:.38},{x:.81,y:1},{x:.19,y:1},{x:0,y:.38}],hexagon:[{x:.5,y:0},{x:1,y:.25},{x:1,y:.75},{x:.5,y:1},{x:0,y:.75},{x:0,y:.25}],rightArrow:[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1},{x:.5,y:.75},{x:0,y:.75},{x:0,y:.25},{x:.5,y:.25}],leftArrow:[{x:.5,y:0},{x:0,y:.5},{x:.5,y:1},{x:.5,y:.75},{x:1,y:.75},{x:1,y:.25},{x:.5,y:.25}],upArrow:[{x:.5,y:0},{x:1,y:.5},{x:.75,y:.5},{x:.75,y:1},{x:.25,y:1},{x:.25,y:.5},{x:0,y:.5}],downArrow:[{x:.5,y:1},{x:0,y:.5},{x:.25,y:.5},{x:.25,y:0},{x:.75,y:0},{x:.75,y:.5},{x:1,y:.5}],fourPointedStar:[{x:.5,y:0},{x:.62,y:.38},{x:1,y:.5},{x:.62,y:.62},{x:.5,y:1},{x:.38,y:.62},{x:0,y:.5},{x:.38,y:.38}],fivePointedStar:[{x:.5,y:0},{x:.62,y:.38},{x:1,y:.39},{x:.7,y:.62},{x:.81,y:1},{x:.5,y:.78},{x:.19,y:1},{x:.3,y:.62},{x:0,y:.39},{x:.38,y:.38}],sixPointedStar:[{x:.5,y:0},{x:.68,y:.25},{x:1,y:.25},{x:.84,y:.5},{x:1,y:.75},{x:.68,y:.75},{x:.5,y:1},{x:.32,y:.75},{x:0,y:.75},{x:.16,y:.5},{x:0,y:.25},{x:.32,y:.25}],lightning:[{x:.39,y:0},{x:.59,y:.28},{x:.52,y:.32},{x:.76,y:.55},{x:.68,y:.59},{x:1,y:1},{x:.47,y:.69},{x:.56,y:.64},{x:.24,y:.45},{x:.35,y:.39},{x:0,y:.19}]},O={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"shape",mouse:{initialX:0,initialY:0},touch:{initialX:0,initialY:0,finalX:0,finalY:0}}},extends:X,methods:{select:function(){console.log("Shape Tool clicked");var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"shape-menu",element:t})},touchFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mousedown"===t.type?(this.mouse.initialX=t.clientX-o.left,this.mouse.initialY=t.clientY-o.top,e=this.mouse.initialX,n=this.mouse.initialY):"touchstart"===t.type&&(this.touch.initialX=t.touches[0].clientX-o.left,this.touch.initialY=t.touches[0].clientY-o.top,this.touch.finalX=this.touch.initialX,this.touch.finalY=this.touch.initialY,e=this.touch.initialX,n=this.touch.initialY);var a=this.$root.paint.canvas.activeContext;a.clearRect(0,0,i.width,i.height),a.beginPath(),a.rect(e,n,1,1),a.stroke()},dragFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=i.getBoundingClientRect(),e=void 0,n=void 0,a=void 0,s=void 0;"mousemove"===t.type?(e=this.mouse.initialX,n=this.mouse.initialY,a=t.clientX-o.left,s=t.clientY-o.top):"touchmove"===t.type&&(e=this.touch.initialX,n=this.touch.initialY,a=t.touches[0].clientX-o.left,s=t.touches[0].clientY-o.top,this.touch.finalX=a,this.touch.finalY=s);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l.beginPath();var r=a-e,c=s-n;l.beginPath(),this.drawShape(e,n,r,c,l),this.$root.paint.options.filledPolygon?l.fill():l.stroke()},releaseFunction:function(t){var i=this.$root.paint.canvas.activeElement,o=void 0,e=void 0,n=void 0,a=void 0;if("mouseup"===t.type){var s=i.getBoundingClientRect();o=this.mouse.initialX,e=this.mouse.initialY,n=t.clientX-s.left,a=t.clientY-s.top}else"touchend"===t.type&&(o=this.touch.initialX,e=this.touch.initialY,n=this.touch.finalX,a=this.touch.finalY);var l=this.$root.paint.canvas.activeContext;l.clearRect(0,0,i.width,i.height),l=this.$root.paint.canvas.undoContext,i=this.$root.paint.canvas.undoElement,l.clearRect(0,0,i.width,i.height);var r=n-o,c=a-e;l.beginPath(),this.drawShape(o,e,r,c,l),this.$root.paint.options.filledPolygon?l.fill():l.stroke(),this.commitDrawing()},drawShape:function(t,i,o,e,n){var a=this.$root.paint.options.selectedShape,s=q[a];if(s){var l=s.map(function(n){return{x:t+n.x*o,y:i+n.y*e}});n.beginPath(),n.moveTo(l[0].x,l[0].y);var r=void 0;for(r=1;r<l.length;r++)n.lineTo(l[r].x,l[r].y);n.closePath()}else console.warn('Invalid shape "'+a+'" selected')}},filters:{pointFilter:function(t){return(q[t]||[]).reduce(function(t,i){return t+(100*i.x+",")+100*i.y+" "},"")}}},G={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:t.name},[o("div",{class:["toolbar-button",t.selected?"selected-item":""],on:{click:function(i){return t.click()}}},[o("div",{ref:"toolbar-button",staticClass:"shape-icon svg-container"},[o("svg",{attrs:{width:"100%",viewBox:"0 0 100 100"}},[o("polygon",{attrs:{stroke:"#000000","stroke-width":"6",fill:"none",points:t._f("pointFilter")(t.$root.paint.options.selectedShape)}})])])])])},staticRenderFns:[]};var N=o("VU/8")(O,G,!1,function(t){o("RCBP")},null,null).exports,z=o("Ib4x"),Q=/^#?([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})?$/i,H=new(o.n(z).a);window.floodFillWorker=H;var J={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"fill",icon:"fas fa-fill-drip",heavyCoverTimeout:0}},mounted:function(){H.onmessage=this.completeFill},extends:X,methods:{select:function(){console.log("Fill Tool clicked")},touchFunction:function(t){},dragFunction:function(t){},releaseFunction:function(t){var i=this.$root.paint.canvas.drawElement,o=i.getBoundingClientRect(),e=void 0,n=void 0;"mouseup"===t.type?(e=t.clientX-o.left,n=t.clientY-o.top):"touchend"===t.type&&(e=t.changedTouches[0].clientX-o.left,n=t.changedTouches[0].clientY-o.top);var a=this.$root.paint.canvas.drawContext,s=i.parentElement.getBoundingClientRect(),l=a.getImageData(0,0,s.width,s.height),r=4*(n*s.width+e),c=l.data.slice(r,r+4),h=this.parseColor(this.$root.paint.options.color);this.toleranceEqual(c,0,h,10)||(this.showLightPaintCover(),this.heavyCoverTimeout=setTimeout(this.showHeavyPaintCover,1e3),H.postMessage({data:l.data,x:e,y:n,parsedColor:h,target:c,tolerance:10,width:s.width,height:s.height}))},completeFill:function(t){var i=this.$root.paint.canvas.undoContext,o=this.$root.paint.canvas.undoElement,e=o.parentElement.getBoundingClientRect();i.clearRect(0,0,o.width,o.height);var n=new ImageData(t.data,e.width,e.height);i.putImageData(n,0,0),this.commitDrawing(),clearTimeout(this.heavyCoverTimeout),this.hidePaintCovers()},toleranceEqual:function(t,i,o,e){var n=o.length,a=i+n;for(e=e||0;a--&&n--;)if(Math.abs(t[a]-o[n])>e)return!1;return!0},parseColor:function(t){var i=Q.exec(t||"");if(!i)throw new Error("Invalid color set");return i.slice(1).map(function(t){var i=parseInt(t,16);return isNaN(i)||i<0||i>255?255:i})},showLightPaintCover:function(){document.querySelector("div.paint-cover-light").style.zIndex=5},showHeavyPaintCover:function(){document.querySelector("div.paint-cover-heavy").style.zIndex=5},hidePaintCovers:function(){document.querySelector("div.paint-cover-light").style.zIndex="",document.querySelector("div.paint-cover-heavy").style.zIndex=""}}},K=o("VU/8")(J,null,!1,null,null,null).exports,j={props:{buttonGroup:{type:String,default:function(){return""}}},data:function(){return{name:"eraser",icon:"fas fa-eraser",mouse:{lastX:0,lastY:0},touch:{},contextRestoreTimeoutArray:[]}},extends:X,methods:{select:function(){console.log("Eraser Tool clicked")},touchFunction:function(t){var i=this;this.contextRestoreTimeoutArray.forEach(function(t){return clearTimeout(t)}),this.contextRestoreTimeoutArray.length=0;var o=this.$root.paint.canvas.activeElement.getBoundingClientRect(),e=this.$root.paint.canvas.activeContext,n=this.$root.paint.options,a=this.getEraserLineWidth(n);if(e.lineWidth=a,e.strokeStyle="#ffffff","mousedown"===t.type){var s=t.clientX-o.left,l=t.clientY-o.top;e.beginPath(),e.moveTo(s,l),e.lineTo(s,l),e.stroke(),this.mouse.lastX=s,this.mouse.lastY=l,this.drawTool(s,l,a)}else"touchstart"===t.type&&(this.touch={},Array.prototype.forEach.call(t.touches,function(t,n){var s={x:t.clientX-o.left,y:t.clientY-o.top};e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(s.x,s.y),e.stroke(),i.touch[t.identifier]=s,i.drawTool(s.x,s.y,a,0===n)}))},dragFunction:function(t){var i=this,o=this.$root.paint.canvas.activeElement.getBoundingClientRect(),e=this.$root.paint.canvas.activeContext,n=this.$root.paint.options,a=this.getEraserLineWidth(n);if("mousemove"===t.type){var s=t.clientX-o.left,l=t.clientY-o.top;e.moveTo(this.mouse.lastX,this.mouse.lastY),e.lineTo(s,l),e.stroke(),this.mouse.lastX=s,this.mouse.lastY=l,this.drawTool(s,l,a)}else"touchmove"===t.type&&Array.prototype.forEach.call(t.touches,function(t,n){var s={x:t.clientX-o.left,y:t.clientY-o.top};e.beginPath(),e.moveTo(i.touch[t.identifier].x,i.touch[t.identifier].y),e.lineTo(s.x,s.y),e.stroke(),i.touch[t.identifier]=s,i.drawTool(s.x,s.y,a,0===n)})},releaseFunction:function(t){var i=this,o=this.$root.paint.canvas.activeElement,e=this.$root.paint.canvas.activeContext,n=this.$root.paint.canvas.undoContext,a=this.$root.paint.canvas.toolContext;n.clearRect(0,0,o.width,o.height),n.drawImage(o,0,0),e.clearRect(0,0,o.width,o.height),a.clearRect(0,0,o.width,o.height),this.commitDrawing(),this.contextRestoreTimeoutArray.push(setTimeout(function(){(e=i.$root.paint.canvas.activeContext).strokeStyle=i.$root.paint.options.color,e.lineWidth=i.$root.paint.options.lineWidth},500))},drawTool:function(t,i,o){var e=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=this.$root.paint.canvas.toolElement,a=this.$root.paint.canvas.toolContext;this.$root.paint.options;e&&a.clearRect(0,0,n.width,n.height),o/=2,a.fillStyle="#ffffff",a.beginPath(),a.ellipse(t,i,o,o,0,0,2*Math.PI),a.fill(),a.lineWidth=1,a.strokeStyle="#000000",a.beginPath(),a.ellipse(t,i,o,o,0,0,2*Math.PI),a.stroke()},getEraserLineWidth:function(t){return 3*t.lineWidth}}},Z={mounted:function(){var t=document.querySelector("div.line-width-icon.svg-container");t.innerHTML=t.innerHTML},methods:{click:function(){var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"line-width-menu",element:t})}}},tt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"line-width-tool",on:{click:function(i){return t.click()}}},[o("div",{staticClass:"toolbar-button"},[o("div",{ref:"toolbar-button",staticClass:"line-width-icon svg-container"},[o("svg",{staticClass:"svg-content",attrs:{viewbox:"0 0 32 32",preserveAspectRatio:"xMinYMin meet"}},[o("g",[o("line",{staticStyle:{stroke:"rgb(0, 0, 0)","stroke-width":"1"},attrs:{x1:"0",y1:"2",x2:"31",y2:"2"}}),t._v(" "),o("line",{staticStyle:{stroke:"rgb(0, 0, 0)","stroke-width":"3"},attrs:{x1:"0",y1:"7",x2:"31",y2:"7"}}),t._v(" "),o("line",{staticStyle:{stroke:"rgb(0, 0, 0)","stroke-width":"5"},attrs:{x1:"0",y1:"15",x2:"31",y2:"15"}}),t._v(" "),o("line",{staticStyle:{stroke:"rgb(0, 0, 0)","stroke-width":"7"},attrs:{x1:"0",y1:"25",x2:"31",y2:"25"}})])])])])])},staticRenderFns:[]};var it={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"filled-polygon-tool"},[o("div",{ref:"toolbar-button",staticClass:"toolbar-button option-tool",on:{click:function(i){return t.click()}}},[o("div",{staticClass:"filled-polygon-icon option-icon"},[o("div",{class:["option",t.isFill()?"":"selected-option"]},[o("div",{staticClass:"no-fill-option"})]),t._v(" "),o("div",{class:["option",t.isFill()?"selected-option":""]},[o("div",{staticClass:"fill-option"})])])])])},staticRenderFns:[]};var ot={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"transparent-selection-tool"},[o("div",{ref:"toolbar-button",staticClass:"toolbar-button option-tool",on:{click:function(i){return t.click()}}},[o("div",{staticClass:"transparent-selection-icon option-icon"},[o("div",{class:["option",t.isTransparentSelection()?"":"selected-option"]},[o("div",{staticClass:"no-fill-option"})]),t._v(" "),o("div",{class:["option",t.isTransparentSelection()?"selected-option":""]},[o("div",{staticClass:"fill-option"})])])])])},staticRenderFns:[]};var et={data:function(){return{}},components:{MenuButton:u,UndoButton:p,RedoButton:v,CopyMenuTool:g,ToolbarSeparator:y,ColorTool:w,SelectTool:D,BrushTool:I,LineTool:A,RectangleTool:M,EllipseTool:L,ShapeTool:N,FillTool:K,EraserTool:o("VU/8")(j,null,!1,null,null,null).exports,LineWidthTool:o("VU/8")(Z,tt,!1,function(t){o("dJzP")},null,null).exports,FilledPolygonTool:o("VU/8")({methods:{isFill:function(){return this.$root.paint.options.filledPolygon},click:function(){var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"filled-polygon-menu",element:t})}}},it,!1,function(t){o("US8W")},null,null).exports,TransparentSelectionTool:o("VU/8")({methods:{isTransparentSelection:function(){return this.$root.paint.options.transparentSelection},click:function(){var t=this.$refs["toolbar-button"];this.$root.$emit("show-popup",{name:"transparent-selection-menu",element:t})}}},ot,!1,function(t){o("Fibw")},null,null).exports}},nt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"toolbar"},[o("menu-button"),t._v(" "),o("undo-button"),t._v(" "),o("redo-button"),t._v(" "),o("copy-menu-tool"),t._v(" "),o("toolbar-separator"),t._v(" "),o("color-tool"),t._v(" "),o("select-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("brush-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("line-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("rectangle-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("ellipse-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("shape-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("fill-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("eraser-tool",{attrs:{buttonGroup:"edit-tools-group"}}),t._v(" "),o("toolbar-separator"),t._v(" "),o("line-width-tool"),t._v(" "),o("filled-polygon-tool"),t._v(" "),o("transparent-selection-tool")],1)},staticRenderFns:[]};var at=o("VU/8")(et,nt,!1,function(t){o("gHmE")},null,null).exports,st={data:function(){return{mouseDown:!1,moveMouseDown:!1,selectionMoving:!1}},mounted:function(){this.createCanvasSet()},methods:{createCanvasSet:function(){var t=this,i=(this.getCanvasDiv(),Math.max(window.screen.width,window.screen.height));["undo","draw","active","tool"].forEach(function(o){var e=document.querySelector("canvas."+o+"-canvas");e.width=i,e.height=i,t.$root.paint.canvas[o+"Element"]=e,t.$root.paint.canvas[o+"Context"]=e.getContext("2d"),t.$root.paint.canvas[o+"Context"].lineCap="round"})},resizeCanvasHandler:function(){var t=this.getCanvasDiv().getBoundingClientRect(),i=this.$root.paint.canvas.drawElement;if(t.width>i.width||t.height>i.height){console.log("resized");var o=this.$root.paint.canvas.drawContext,e=o.getImageData(0,0,i.width,i.height);["undo","draw","active","tool"].forEach(function(i){var o=document.querySelector("canvas."+i+"-canvas");o.width=t.width,o.height=t.height,o.getContext("2d").lineCap="round"}),o.fillStyle="#ffffff",o.beginPath(),o.rect(0,0,t.width,t.height),o.fill(),this.$root.paint.state.setColor(this.$root.paint.options.color),this.$root.paint.state.setLineWidth(this.$root.paint.options.lineWidth),o.putImageData(e,0,0)}},getCanvasDiv:function(){return this.$refs["canvas-div"]},touchFunction:function(t){this.selectionMoving||(this.$root.$emit("drawing-started"),this.$root.paint.state.drawing=!0,"mousedown"===t.type&&(this.mouseDown=!0),this.$root.paint.function.touch(t))},dragFunction:function(t){this.selectionMoving||("mousemove"!==t.type||this.mouseDown)&&(t.preventDefault(),this.$root.paint.function.drag(t))},releaseFunction:function(t){this.selectionMoving?this.moveReleaseFunction(t):("mouseup"===t.type&&(this.mouseDown=!1),this.$root.paint.function.release(t),this.$root.paint.state.drawing=!1,this.$root.$emit("drawing-released"))},moveTouchFunction:function(t){"mousedown"===t.type&&(this.mouseDown=!0),this.selectionMoving=!0,this.$root.paint.function.moveTouch(t)},moveDragFunction:function(t){("mousemove"!==t.type||this.mouseDown)&&(t.preventDefault(),this.$root.paint.function.moveDrag(t))},moveReleaseFunction:function(t){"mouseup"===t.type&&(this.mouseDown=!1),this.selectionMoving=!1,this.$root.paint.function.moveRelease(t)}},filters:{selectionFilter:function(t){return t?"left: "+t.x+"px; top: "+t.y+"px; width: "+t.width+"px; height: "+t.height+"px;":""}}},lt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"canvas"},[o("div",{ref:"canvas-div",staticClass:"canvas-child"},[o("canvas",{staticClass:"undo-canvas"}),t._v(" "),o("canvas",{staticClass:"draw-canvas"}),t._v(" "),o("canvas",{staticClass:"active-canvas"}),t._v(" "),o("canvas",{staticClass:"tool-canvas",on:{mousedown:t.touchFunction,touchstart:t.touchFunction,mousemove:t.dragFunction,touchmove:t.dragFunction,mouseup:t.releaseFunction,touchend:t.releaseFunction}})]),t._v(" "),o("div",{staticClass:"paint-cover-light"}),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"selection",style:t._f("selectionFilter")(t.$root.paint.state.selection),on:{mousedown:t.moveTouchFunction,touchstart:t.moveTouchFunction,mousemove:t.moveDragFunction,touchmove:t.moveDragFunction,mouseup:t.moveReleaseFunction,touchend:t.moveReleaseFunction}})])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"paint-cover-heavy"},[i("div",{staticClass:"outer"},[i("div",{staticClass:"inner-cover"}),this._v(" "),i("div",{staticClass:"inner-container"},[i("i",{staticClass:"fas fa-hourglass-half"})])])])}]};var rt=o("VU/8")(st,lt,!1,function(t){o("ZTYA")},null,null).exports,ct={data:function(){return{visible:!1,popupVisible:!1,heightOffset:0,width:0,initiallyHidden:!0,attachElement:null}},props:{name:{type:String,default:""}},mounted:function(){var t=this;this.$root.$on("show-popup",function(i){t.name===i.name&&t.show(i.element)}),this.$root.$on("hide-popup",function(i){t.name===i&&t.hide()}),this.setLeft(),window.addEventListener("resize",function(){t.setLeft(),t.setTop()}),this.$root.$on("unhide-popups",function(){return t.initiallyHidden=!1})},methods:{show:function(t){var i=this;this.attachElement=t,this.setTop(),this.visible=!0,document.querySelector("div.popup-container."+this.name+" div.popup-menu").style.left="",setTimeout(function(){return i.popupVisible=!0},250)},hide:function(){this.visible=!1,this.popupVisible=!1,document.querySelector("div.popup-container."+this.name+" div.popup-menu").style.left=-this.width+"px"},setLeft:function(){var t=this.$refs["popup-ref"].getBoundingClientRect();this.width=t.width},setTop:function(){if(this.attachElement){var t=this.attachElement.getBoundingClientRect();this.heightOffset=t.top}}}},ht={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:["popup-container",t.name]},[o("div",{class:["popup-overlay",t.visible?"popup-visible":"popup-invisible"],on:{click:function(i){return t.hide()}}}),t._v(" "),o("div",{ref:"popup-ref",class:["popup-menu",t.popupVisible?"popup-layer":""],style:"top: "+t.heightOffset+"px;"+(t.visible?"":" left: "+-t.width+"px;")+(t.initiallyHidden?" z-index: -5;":"")},[t._t("default")],2)])},staticRenderFns:[]};var ut=o("VU/8")(ct,ht,!1,function(t){o("sufU")},"data-v-71862392",null).exports,dt={data:function(){return{icon:"",name:"",optionName:"",ligature:""}},methods:{click:function(){},new:function(){var t=this;this.$root.paint.state.resetState();var i=this.$root.paint.canvas.undoElement,o=this.$root.paint.canvas.undoContext;o.fillStyle="#ffffff",o.fillRect(0,0,i.width,i.height),["draw","active","tool"].forEach(function(i){t.$root.paint.canvas[i+"Element"].width=t.$root.paint.canvas[i+"Element"].width}),(o=this.$root.paint.canvas.drawContext).fillStyle="#ffffff",o.fillRect(0,0,i.width,i.height),this.$root.paint.canvas.undoElement.width=this.$root.paint.canvas.undoElement.width,this.$root.paint.state.setColor(this.$root.paint.options.color),this.$root.paint.state.setLineWidth(this.$root.paint.options.lineWidth)}}},pt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:["main-menu-option",t.name],on:{click:function(i){return t.click()}}},[o("div",{staticClass:"menu-option-icon"},[o("i",{class:t.icon},[t._v(t._s(t.ligature))])]),t._v(" "),o("div",{staticClass:"menu-option-name"},[t._v("\n        "+t._s(t.optionName)+"\n    ")])])},staticRenderFns:[]};var ft=o("VU/8")(dt,pt,!1,function(t){o("K9Gc")},null,null).exports,vt={data:function(){return{icon:"far fa-file",name:"new",optionName:"New"}},extends:ft,mounted:function(){this.$root.$on("action-new",this.new)},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.$root.paint.state.dirty?(b()(this.$root.paint.state.confirm,{confirmDialog:!0,message:["There are unsaved changes to this drawing.","Are you sure you want to discard the drawing?"],confirmAction:"action-new"}),this.$root.$emit("show-dialog","confirm-dialog")):this.new()}}},mt=o("VU/8")(vt,null,!1,null,null,null).exports,gt={data:function(){return{filename:"",selectionArea:{}}},mounted:function(){var t=this;this.$root.$on("selection-cleared",function(i){"save-selection"===i&&t.saveContinued(!0)})},methods:{save:function(t,i){this.filename=t||"drawing.png",i&&this.$root.paint.state.selection?(this.selectionArea.x=this.$root.paint.state.selection.x,this.selectionArea.y=this.$root.paint.state.selection.y,this.selectionArea.width=this.$root.paint.state.selection.width,this.selectionArea.height=this.$root.paint.state.selection.height,this.$root.$emit("clear-selection","save-selection")):this.saveContinued(!1)},saveContinued:function(t){var i,o=document.querySelector("div.canvas").getBoundingClientRect(),e=this.$root.paint.canvas.drawContext,n=void 0,a=this.$root.paint.canvas.undoElement,s=this.$root.paint.canvas.undoContext,l=a.width,r=a.height,c=void 0,h=void 0,u=void 0;t?(n=e.getImageData(this.selectionArea.x,this.selectionArea.y,this.selectionArea.width,this.selectionArea.height),c=this.selectionArea.width,h=this.selectionArea.height):(n=e.getImageData(0,0,o.width,o.height),c=o.width,h=o.height),a.width=c,a.height=h,s.putImageData(n,0,0),i=a.toDataURL(),(u=document.createElement("a")).href=i,u.download=this.filename,u.click(),a.width=l,a.height=r,s.stokeStyle=this.$root.paint.options.color,s.fillStyle=this.$root.paint.options.color,s.lineWidth=this.$root.paint.options.lineWidth,s.lineCap="round",t&&(this.$root.paint.state.selection.x=this.selectionArea.x,this.$root.paint.state.selection.y=this.selectionArea.y,this.$root.paint.state.selection.width=this.selectionArea.width,this.$root.paint.state.selection.height=this.selectionArea.height,this.$root.$emit("update-selection"))}}},$t=o("VU/8")(gt,null,!1,null,null,null).exports,yt={data:function(){return{icon:"far fa-save",name:"save",optionName:"Save"}},extends:ft,mixins:[$t],mounted:function(){},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.save("Drawing.png",!1)}}},xt={data:function(){return{icon:"far fa-save",name:"save-selection",optionName:"Save Selection"}},extends:ft,mixins:[$t],mounted:function(){},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.save("Drawing.png",!0)}}};var wt={data:function(){return{icon:"far fa-folder-open",name:"open",optionName:"Open",fileInputElement:null}},extends:ft,mounted:function(){this.$root.$on("action-open",this.open),this.fileInputElement=document.createElement("input"),this.fileInputElement.type="file",this.fileInputElement.addEventListener("change",this.processFile)},methods:{click:function(){this.$root.$emit("hide-popup","main-menu"),this.$root.paint.state.dirty?(b()(this.$root.paint.state.confirm,{confirmDialog:!0,message:["There are unsaved changes to this drawing.","Are you sure you want to discard the drawing?"],confirmAction:"action-open"}),this.$root.$emit("show-dialog","confirm-dialog")):this.open()},open:function(){this.fileInputElement.click()},processFile:function(){var t=this;if(window.File&&window.FileReader){var i=function(){t.new(),t.$root.paint.canvas.drawContext.drawImage(n,0,0)},o=this.fileInputElement.files[0],e=new FileReader,n=void 0;e.onload=function(){(n=new Image).onload=i,n.src=e.result},e.readAsDataURL(o)}else this.$root.paint.state.confirm.confirmDialog=!1,this.$root.paint.state.confirm.message=["Uh oh, there's an error!","Your web browser does not support this feature","If possible, please use this app in a modern web browser like Google Chrome, Firefox, or Safari"],this.$root.$emit("show-confirm-dialog")}}},Ct={data:function(){return{icon:"material-icons",name:"report-issue",optionName:"Report an Issue",ligature:"error_outline"}},extends:ft,mounted:function(){},methods:{click:function(){this.$root.$emit("hide-popup","main-menu")}}};var bt={data:function(){return{icon:"far fa-comment-alt",name:"about",optionName:"About Paintbuddy.cc"}},extends:ft,mounted:function(){},methods:{click:function(){this.$root.$emit("hide-popup","main-menu")}}},_t={mounted:function(){},components:{PopupMenu:ut,NewMenuOption:mt,SaveMenuOption:o("VU/8")(yt,null,!1,null,null,null).exports,SaveSelectionMenuOption:o("VU/8")(xt,null,!1,function(t){o("wVqK")},null,null).exports,OpenMenuOption:o("VU/8")(wt,null,!1,null,null,null).exports,ReportIssueMenuOption:o("VU/8")(Ct,null,!1,function(t){o("uJ0S")},null,null).exports,AboutMenuOption:o("VU/8")(bt,null,!1,null,null,null).exports}},St={render:function(){var t=this.$createElement,i=this._self._c||t;return i("popup-menu",{attrs:{name:"main-menu"}},[i("div",{staticClass:"main-menu-select"},[i("new-menu-option"),this._v(" "),i("save-menu-option"),this._v(" "),i("save-selection-menu-option"),this._v(" "),i("open-menu-option"),this._v(" "),i("report-issue-menu-option"),this._v(" "),i("about-menu-option")],1)])},staticRenderFns:[]};var Et=o("VU/8")(_t,St,!1,function(t){o("m8zS")},null,null).exports,Xt={data:function(){return{name:"copy",icon:"far fa-copy"}},extends:l,methods:{click:function(){this.$root.$emit("copy-selection"),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection}}},Yt={data:function(){return{name:"cut",icon:"fas fa-cut"}},extends:l,methods:{click:function(){this.$root.$emit("cut-selection"),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection}}},Tt={data:function(){return{name:"paste",icon:"far fa-clipboard"}},extends:l,methods:{click:function(){this.$root.$emit("paste-selection"),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.copySelection}}},Rt={data:function(){return{name:"flip-horizontal",icon:"material-icons"}},extends:l,mounted:function(){this.$refs["icon-ref"].appendChild(document.createTextNode("flip"))},methods:{click:function(){this.$root.$emit("update-selection",this.transform),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection},transform:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=t.data,n=function(t,o){return 4*(o*i+t)},a=Math.floor(i/2),s=void 0,l=void 0,r=void 0,c=void 0,h=void 0,u=void 0;for(s=0;s<=a;s++)for(l=0;l<o;l++)for(r=n(s,l),c=n(i-1-s,l),h=0;h<4;h++)u=e[r+h],e[r+h]=e[c+h],e[c+h]=u;return t}}},Ft={data:function(){return{name:"flip-vertical",icon:"material-icons"}},extends:l,mounted:function(){this.$refs["icon-ref"].appendChild(document.createTextNode("flip"))},methods:{click:function(){this.$root.$emit("update-selection",this.transform),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection},transform:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=t.data,n=function(t,o){return 4*(o*i+t)},a=Math.floor(o/2),s=void 0,l=void 0,r=void 0,c=void 0,h=void 0,u=void 0;for(l=0;l<=a;l++)for(s=0;s<i;s++)for(r=n(s,l),c=n(s,o-1-l),h=0;h<4;h++)u=e[r+h],e[r+h]=e[c+h],e[c+h]=u;return t}}};var kt={data:function(){return{name:"rotate-cw",icon:"material-icons"}},extends:l,mounted:function(){this.$refs["icon-ref"].appendChild(document.createTextNode("rotate_90_degrees_ccw"))},methods:{click:function(){this.$root.$emit("update-selection",this.transform),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection},transform:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=this.$root.paint.canvas.toolElement,n=t.data,a=function(t,i){return 4*(i*o+t)},s=this.$root.paint.state.selection.x+this.$root.paint.state.selection.width/2,l=this.$root.paint.state.selection.y+this.$root.paint.state.selection.height/2,r=new ImageData(new Uint8ClampedArray(n.length),o,i),c=void 0,h=void 0,u=o-1,d=0;for(c=0;c<n.length;c+=4)h=a(u,d),r.data[h]=n[c],r.data[h+1]=n[c+1],r.data[h+2]=n[c+2],r.data[h+3]=n[c+3],++d>=i&&(d=0,u--);this.$root.paint.state.selection.x=s-o/2,this.$root.paint.state.selection.y=l-i/2,this.$root.paint.state.selection.width=o,this.$root.paint.state.selection.height=i;var p=this.$root.paint.state.selection.x+this.$root.paint.state.selection.width,f=this.$root.paint.state.selection.y+this.$root.paint.state.selection.height;return p>=e.width&&(this.$root.paint.state.selection.x-=p-e.width),this.$root.paint.state.selection.x<0&&(this.$root.paint.state.selection.x=0),f>=e.height&&(this.$root.paint.state.selection.y-=f-e.height),this.$root.paint.state.selection.y<0&&(this.$root.paint.state.selection.y=0),r}}};var Pt={data:function(){return{name:"rotate-ccw",icon:"material-icons"}},extends:l,mounted:function(){this.$refs["icon-ref"].appendChild(document.createTextNode("rotate_90_degrees_ccw"))},methods:{click:function(){this.$root.$emit("update-selection",this.transform),this.$root.$emit("hide-popup","copy-menu")},isEnabled:function(){return!!this.$root.paint.state.selection},transform:function(t){var i=this.$root.paint.state.selection.width,o=this.$root.paint.state.selection.height,e=this.$root.paint.canvas.toolElement,n=t.data,a=function(t,i){return 4*(i*o+t)},s=this.$root.paint.state.selection.x+this.$root.paint.state.selection.width/2,l=this.$root.paint.state.selection.y+this.$root.paint.state.selection.height/2,r=new ImageData(new Uint8ClampedArray(n.length),o,i),c=void 0,h=void 0,u=0,d=i-1;for(c=0;c<n.length;c+=4)h=a(u,d),r.data[h]=n[c],r.data[h+1]=n[c+1],r.data[h+2]=n[c+2],r.data[h+3]=n[c+3],--d<0&&(d=i-1,u++);this.$root.paint.state.selection.x=s-o/2,this.$root.paint.state.selection.y=l-i/2,this.$root.paint.state.selection.width=o,this.$root.paint.state.selection.height=i;var p=this.$root.paint.state.selection.x+this.$root.paint.state.selection.width,f=this.$root.paint.state.selection.y+this.$root.paint.state.selection.height;return p>=e.width&&(this.$root.paint.state.selection.x-=p-e.width),this.$root.paint.state.selection.x<0&&(this.$root.paint.state.selection.x=0),f>=e.height&&(this.$root.paint.state.selection.y-=f-e.height),this.$root.paint.state.selection.y<0&&(this.$root.paint.state.selection.y=0),r}}},Dt={components:{PopupMenu:ut,CopyTool:o("VU/8")(Xt,null,!1,null,null,null).exports,CutTool:o("VU/8")(Yt,null,!1,null,null,null).exports,PasteTool:o("VU/8")(Tt,null,!1,null,null,null).exports,FlipHorizontalTool:o("VU/8")(Rt,null,!1,null,null,null).exports,FlipVerticalTool:o("VU/8")(Ft,null,!1,function(t){o("12tn")},null,null).exports,RotateCwTool:o("VU/8")(kt,null,!1,function(t){o("Ahp8")},null,null).exports,RotateCcwTool:o("VU/8")(Pt,null,!1,null,null,null).exports}},Ut={render:function(){var t=this.$createElement,i=this._self._c||t;return i("popup-menu",{attrs:{name:"copy-menu"}},[i("div",{staticClass:"copy-tool-select"},[i("div",{staticClass:"copy-tool-option"},[i("copy-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("cut-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("paste-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("flip-horizontal-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("flip-vertical-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("rotate-cw-tool")],1),this._v(" "),i("div",{staticClass:"copy-tool-option"},[i("rotate-ccw-tool")],1)])])},staticRenderFns:[]};var It=o("VU/8")(Dt,Ut,!1,function(t){o("6FqT")},null,null).exports,Vt={props:{color:{type:String,default:""}},methods:{isSelected:function(){return this.$root.paint.options.color===this.color},select:function(){this.$root.paint.state.setColor(this.color),this.$root.$emit("hide-popup","color-menu")}}},At={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"color-option-border",style:"border-color: "+(t.isSelected()?"#64a5e7":"#a0a0a0")+";",on:{click:function(i){return t.select()}}},[o("div",{staticClass:"color-option",style:"background-color: "+t.color+";"})])},staticRenderFns:[]};var Bt={data:function(){return{colorList:[{rowIndex:0,colors:["#000000","#7f7f7f","#880015","#ed1c24","#ff7f27","#fff200","#22b14c","#00a2e8","#3f48cc","#a349a4"]},{rowIndex:1,colors:["#ffffff","#c3c3c3","#b97a57","#ffaec9","#ffc90e","#efe4b0","#b5e61d","#99d9ea","#7092be","#c8bfe7"]}]}},components:{PopupMenu:ut,ColorOption:o("VU/8")(Vt,At,!1,function(t){o("AldA")},null,null).exports},methods:{ordinate:function(t){return t.map(function(t,i){return{color:t,index:i}})}}},Mt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("popup-menu",{attrs:{name:"color-menu"}},[o("div",{staticClass:"color-select"},t._l(t.colorList,function(i){return o("div",{key:i.rowIndex,staticClass:"color-select-row"},t._l(t.ordinate(i.colors),function(t){return o("color-option",{key:t.index,attrs:{color:t.color}})}),1)}),0)])},staticRenderFns:[]};var Wt=o("VU/8")(Bt,Mt,!1,function(t){o("2D1X")},null,null).exports,Lt={components:{PopupMenu:ut},data:function(){return{shapeListRows:(t=q,i=[],o=0,e={elements:[],key:o++},a()(t).forEach(function(n){e.elements.push({name:n,points:t[n]}),e.elements.length>=6&&(i.push(e),e={elements:[],key:o++})}),e.elements.length>0&&i.push(e),i)};var t,i,o,e},methods:{select:function(t){this.$root.paint.options.selectedShape=t,this.$root.$emit("hide-popup","shape-menu")},isSelected:function(t){return this.$root.paint.options.selectedShape===t}},filters:{pointsFilter:function(t){return t.reduce(function(t,i){return t+(100*i.x+",")+100*i.y+" "},"")}}},qt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("popup-menu",{attrs:{name:"shape-menu"}},[o("div",{staticClass:"shape-select"},t._l(t.shapeListRows,function(i){return o("div",{key:i.key,staticClass:"shape-select-row"},t._l(i.elements,function(i){return o("div",{key:i.name,staticClass:"shape-select-cell",on:{click:function(o){return t.select(i.name)}}},[o("div",{class:["option",t.isSelected(i.name)?"selected-option":""]},[o("svg",{attrs:{width:"100%",viewBox:"0 0 100 100"}},[o("polygon",{attrs:{stroke:"#000000","stroke-width":"4",fill:"none",points:t._f("pointsFilter")(i.points)}})])])])}),0)}),0)])},staticRenderFns:[]};var Ot=o("VU/8")(Lt,qt,!1,function(t){o("TlmB")},null,null).exports,Gt={props:{lineWidth:{type:Number,default:1}},methods:{isSelected:function(){return this.$root.paint.options.lineWidth===this.lineWidth},click:function(){this.$root.paint.state.setLineWidth(this.lineWidth),this.$root.$emit("hide-popup","line-width-menu")}},filters:{lineWidthFilter:function(t){return"height: "+t+"px;"}}},Nt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:["line-width-option",t.isSelected()?"line-width-selected":""],on:{click:function(i){return t.click()}}},[o("div",{staticClass:"line-width-display",style:t._f("lineWidthFilter")(t.lineWidth)})])},staticRenderFns:[]};var zt={data:function(){return{lineWidthList:[1,3,5,8]}},components:{PopupMenu:ut,LineWidthOption:o("VU/8")(Gt,Nt,!1,function(t){o("XUvm")},null,null).exports},methods:{ordinate:function(t){return t.map(function(t,i){return{width:t,index:i}})}}},Qt={render:function(){var t=this.$createElement,i=this._self._c||t;return i("popup-menu",{attrs:{name:"line-width-menu"}},[i("div",{staticClass:"line-width-select"},this._l(this.ordinate(this.lineWidthList),function(t){return i("line-width-option",{key:t.index,attrs:{"line-width":t.width}})}),1)])},staticRenderFns:[]},Ht=o("VU/8")(zt,Qt,!1,null,null,null).exports,Jt={components:{PopupMenu:ut},methods:{isFill:function(){return this.$root.paint.options.filledPolygon},setFill:function(t){this.$root.paint.options.filledPolygon=t,this.$root.$emit("hide-popup","filled-polygon-menu")}}},Kt={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("popup-menu",{attrs:{name:"filled-polygon-menu"}},[o("div",{staticClass:"filled-polygon-select"},[o("div",{class:["option",t.isFill()?"":"selected-option"],on:{click:function(i){return t.setFill(!1)}}},[o("div",{staticClass:"no-fill-option"})]),t._v(" "),o("div",{class:["option",t.isFill()?"selected-option":""],on:{click:function(i){return t.setFill(!0)}}},[o("div",{staticClass:"fill-option"})])])])},staticRenderFns:[]};var jt=o("VU/8")(Jt,Kt,!1,function(t){o("FzsO")},null,null).exports,Zt={components:{PopupMenu:ut},methods:{isTransparentSelection:function(){return this.$root.paint.options.transparentSelection},setTransparentSelection:function(t){this.$root.paint.options.transparentSelection=t,this.$root.$emit("hide-popup","transparent-selection-menu"),this.$root.$emit("update-selection")}}},ti={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("popup-menu",{attrs:{name:"transparent-selection-menu"}},[o("div",{staticClass:"transparent-selection-select"},[o("div",{class:["option",t.isTransparentSelection()?"":"selected-option"],on:{click:function(i){return t.setTransparentSelection(!1)}}},[o("div",{staticClass:"no-fill-option"})]),t._v(" "),o("div",{class:["option",t.isTransparentSelection()?"selected-option":""],on:{click:function(i){return t.setTransparentSelection(!0)}}},[o("div",{staticClass:"fill-option"})])])])},staticRenderFns:[]};var ii=o("VU/8")(Zt,ti,!1,function(t){o("qDae")},null,null).exports,oi={data:function(){return{visible:!1}},props:{name:{type:String,default:""}},mounted:function(){var t=this;this.$root.$on("show-dialog",function(i){i===t.name&&t.show()}),this.$root.$on("hide-dialog",function(i){i===t.name&&t.hide()})},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1}}},ei={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{class:["dialog-box-container",t.name,t.visible?"dialog-box-visible":"dialog-box-invisible"]},[o("div",{staticClass:"dialog-box-outer"},[o("div",{staticClass:"dialog-box-overlay"}),t._v(" "),o("div",{staticClass:"dialog-box-window-container",on:{click:function(i){return t.hide()}}},[t._t("default")],2)])])},staticRenderFns:[]};var ni={components:{DialogBox:o("VU/8")(oi,ei,!1,function(t){o("q2UD")},null,null).exports},mounted:function(){},methods:{action:function(){this.hide(),this.$root.$emit(this.$root.paint.state.confirm.confirmAction)},hide:function(){this.$root.$emit("hide-dialog","confirm-dialog")},ordinate:function(t){return(Array.isArray(t)?t:[t]).map(function(t,i){return{element:t,index:i}})}}},ai={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("dialog-box",{attrs:{name:"confirm-dialog"}},[o("div",{staticClass:"confirm-dialog-window"},[o("div",{staticClass:"message-panel"},t._l(t.ordinate(t.$root.paint.state.confirm.message),function(i){return o("p",{key:i.index},[t._v("\n                "+t._s(i.element)+"\n            ")])}),0),t._v(" "),o("div",{staticClass:"button-panel"},[o("div",{staticClass:"button-span"},[t.$root.paint.state.confirm.confirmDialog?o("div",{staticClass:"button cancel-button",on:{click:function(i){return t.hide()}}},[o("span",[o("i",{staticClass:"fas fa-times-circle"}),t._v("\n                        Cancel\n                    ")])]):t._e(),t._v(" "),o("div",{staticClass:"button confirm-button",on:{click:function(i){(t.$root.paint.state.confirm.confirmDialog?t.action:t.hide)()}}},[o("span",[o("i",{staticClass:"fas fa-check-circle"}),t._v("\n                        Confrm\n                    ")])])])])])])},staticRenderFns:[]};var si={data:function(){return{}},components:{MainMenu:Et,CopyMenu:It,ColorMenu:Wt,ShapeMenu:Ot,LineWidthMenu:Ht,FilledPolygonMenu:jt,TransparentSelectionMenu:ii,ConfirmDialog:o("VU/8")(ni,ai,!1,function(t){o("IfdC")},null,null).exports}},li={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"menu"},[i("main-menu"),this._v(" "),i("copy-menu"),this._v(" "),i("color-menu"),this._v(" "),i("shape-menu"),this._v(" "),i("line-width-menu"),this._v(" "),i("filled-polygon-menu"),this._v(" "),i("transparent-selection-menu"),this._v(" "),i("confirm-dialog")],1)},staticRenderFns:[]},ri={data:function(){return{}},mixins:[S],created:function(){var t=this;this.$root.paint={function:{touch:function(){},drag:function(){},release:function(){},moveTouch:function(){},moveDrag:function(){},moveRelease:function(){}},options:{color:"#000000",lineWidth:3,transparentSelection:!1,filledPolygon:!1,selectedShape:a()(q)[0]},canvas:{toolElement:null,toolContext:null,activeElement:null,activeContext:null,drawElement:null,drawContext:null,undoElement:null,undoContext:null},state:{setColor:function(i){if(t.$root.paint.state.drawing)t.$root.paint.state._colorTo=i;else{t.$root.paint.state._colorTo=null,t.$root.paint.options.color=i;var o=t.$root.paint.canvas;o.drawContext.strokeStyle=i,o.drawContext.fillStyle=i,o.activeContext.strokeStyle=i,o.activeContext.fillStyle=i,o.undoContext.strokeStyle=i,o.undoContext.fillStyle=i}},setLineWidth:function(i){if(t.$root.paint.state.drawing)t.$root.paint.state._lineWidthTo=i;else{t.$root.paint.state._lineWidthTo=null,t.$root.paint.options.lineWidth=i;var o=t.$root.paint.canvas;o.drawContext.lineWidth=i,o.activeContext.lineWidth=i,o.undoContext.lineWidth=i}},setTouchFunctions:function(i,o,e){t.$root.paint.state.drawing?t.$root.paint.state._touchFunctionsTo={touchFunction:i,dragFunction:o,releaseFunction:e}:(t.$root.paint.state._touchFunctionsTo=null,t.$root.paint.function.touch=i,t.$root.paint.function.drag=o,t.$root.paint.function.release=e)},saveUndoMap:function(i){t.$root.paint.state.dirty=!0,t.$root.paint.state.canRedo=!1,t.$root.paint.state._redoQueue.length=0,t.$root.paint.state._undoQueue.push(i)},undo:function(){if(t.$root.paint.state._undoQueue.length>0){var i=t.$root.paint.canvas.drawElement,o=t.$root.paint.canvas.drawContext,e=o.getImageData(0,0,i.width,i.height),n=t.$root.paint.state._undoQueue.pop(),s={},l=e.data,r=void 0,c=void 0,h=void 0,u=void 0,d=void 0,p=void 0,f=void 0,v=void 0,m=void 0,g=void 0;a()(n).forEach(function(t){u=255&t,h=65280&t,c=16711680&t,r=4278190080&t,h>>=8,c>>=16,(r>>=24)<0&&(r=255+r),n[t].forEach(function(t){Array.isArray(t)?(g=t[1],t=t[0]):g=t;do{d=l[t],p=l[t+1],f=l[t+2],v=l[t+3],l[t]=r,l[t+1]=c,l[t+2]=h,l[t+3]=u,s[m=v|f<<8|p<<16|d<<24]||(s[m]=[]),s[m].push(t),t+=4}while(t<=g)})}),o.putImageData(e,0,0);var $=t.compressUndoMap(s);t.$root.paint.state._redoQueue.push($),t.$root.paint.state.canRedo=!0,t.$root.paint.state.dirty=t.$root.paint.state._undoQueue.length>0}},redo:function(){if(t.$root.paint.state._redoQueue.length>0){var i=t.$root.paint.canvas.drawElement,o=t.$root.paint.canvas.drawContext,e=o.getImageData(0,0,i.width,i.height),n=t.$root.paint.state._redoQueue.pop(),s={},l=e.data,r=void 0,c=void 0,h=void 0,u=void 0,d=void 0,p=void 0,f=void 0,v=void 0,m=void 0,g=void 0;a()(n).forEach(function(t){u=255&t,h=65280&t,c=16711680&t,r=4278190080&t,h>>=8,c>>=16,(r>>=24)<0&&(r=255+r),n[t].forEach(function(t){Array.isArray(t)?(g=t[1],t=t[0]):g=t;do{d=l[t],p=l[t+1],f=l[t+2],v=l[t+3],l[t]=r,l[t+1]=c,l[t+2]=h,l[t+3]=u,s[m=v|f<<8|p<<16|d<<24]||(s[m]=[]),s[m].push(t),t+=4}while(t<=g)})}),o.putImageData(e,0,0);var $=t.compressUndoMap(s);t.$root.paint.state._undoQueue.push($),t.$root.paint.state.dirty=!0,t.$root.paint.state.canRedo=t.$root.paint.state._redoQueue.length>0}},resetState:function(){var i=t.$root.paint.state;i.drawing=!1,i.dirty=!1,i.canRedo=!1,i.selection=null,i.copySelection=null,i._undoQueue.length=0,i._redoQueue.length=0,i._colorTo=null,i._lineWidthTo=null,i._touchFunctionsTo=null},confirm:{confirmDialog:!1,confirmAction:"",message:""},drawing:!1,dirty:!1,canRedo:!1,selection:null,copySelection:null,_undoQueue:[],_redoQueue:[],_colorTo:null,_lineWidthTo:null,_touchFunctionsTo:null}},window.Vue=this.$root},mounted:function(){var t=this,i=this.$root.paint.canvas.drawElement,o=this.$root.paint.canvas.drawContext;o.fillStyle="#ffffff",o.beginPath(),o.rect(0,0,i.width,i.height),o.fill(),setTimeout(function(){return t.$root.$emit("unhide-popups")},250),this.$root.paint.state.setColor(this.$root.paint.options.color),this.$root.paint.state.setLineWidth(this.$root.paint.options.lineWidth);try{document.querySelector("div.brush div.toolbar-button").click()}catch(t){}this.$root.$on("drawing-released",function(){if(t.$root.paint.state._colorTo&&t.$root.paint.state.setColor(t.$root.paint.state._colorTo),t.$root.paint.state._lineWidthTo&&t.$root.paint.state.setLineWidth(t.$root.paint.state._lineWidthTo),t.$root.paint.state._touchFunctionsTo){var i=t.$root.paint.state._touchFunctionsTo;t.$root.paint.state.setTouchFunctions(i.touchFunction,i.dragFunction,i.releaseFunction)}})},components:{PaintToolbar:at,PaintCanvas:rt,PaintMenu:o("VU/8")(si,li,!1,null,null,null).exports}},ci={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("paint-toolbar"),this._v(" "),i("paint-canvas"),this._v(" "),i("paint-menu")],1)},staticRenderFns:[]},hi=o("VU/8")(ri,ci,!1,null,null,null).exports;e.a.config.productionTip=!1,new e.a({el:"#app",components:{App:hi},template:"<App/>",data:function(){return{paint:{options:{color:"",lineWidth:0,filledPolygon:!1,transparentSelection:!1,selectedShape:""},state:{dirty:!1,canRedo:!1,selection:null,confirm:{confirmDialog:!1,confirmAction:"",message:""}},refs:[]}}}})},RCBP:function(t,i){},TlmB:function(t,i){},US8W:function(t,i){},XUvm:function(t,i){},ZTYA:function(t,i){},dJzP:function(t,i){},gHmE:function(t,i){},m8zS:function(t,i){},q2UD:function(t,i){},qDae:function(t,i){},sufU:function(t,i){},uJ0S:function(t,i){},wVqK:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.87698a19de90514fe925.js.map